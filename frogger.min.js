/*! frogger.js | (c) Antoine Béland | MIT License */
var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},Utils;!function(e){!function(e){e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(e.LogLevel||(e.LogLevel={}));var t=e.LogLevel,i=function(){function e(){}return e.logMessage=function(i,n){if(void 0===n&&(n=t.Debug),!(e.activeLogLevel>n))switch(n){case t.Debug:console.log("[DEBUG] "+i);break;case t.Info:console.info("[INFO] "+i);break;case t.Warning:console.warn("[WARNING] "+i);break;case t.Error:console.error("[ERROR] "+i)}},e.activeLogLevel=t.Debug,e}();e.Logger=i}(Utils||(Utils={}));var FroggerJS;!function(e){e.Constants={ACTIVE_LOG_LEVEL:Utils.LogLevel.Info,AUDIO_MUTED:!1,AVAILABLE_LIVES:5,DEFAULT_TEXT_MARGIN:15,DEFAULT_TEXT_STYLE:{font:"40px Arial",fill:"white"},DISPLAY_BOUNDING:!1,GOAL_SCORE:100,MOVE_SCORE:10,PANEL_COLOR:884404,TILE_SIZE:120,VERSION:"1.0.0",WINDOW_WIDTH:1560,WINDOW_HEIGHT:1200},e.Levels=[{goalsNumber:3,soundtrack:"game1",board:[{texture:"grass-water-top",touchAllowed:!0},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:1.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"grass-water-bottom",touchAllowed:!0,bonus:"star"},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1.5}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1.5}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1}},{texture:"grass",touchAllowed:!0}]},{goalsNumber:3,soundtrack:"game2",board:[{texture:"grass-water-top",touchAllowed:!0},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:1}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:2.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"grass-water-bottom",touchAllowed:!0,bonus:"heart"},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:2}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:2}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1}},{texture:"grass",touchAllowed:!0}]},{goalsNumber:2,soundtrack:"game3",board:[{texture:"grass-water-top",touchAllowed:!0},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1.75}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:2.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:3}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:2}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1.5}},{texture:"grass-water-bottom",touchAllowed:!0,bonus:"star"},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:2}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1.5}},{texture:"grass",touchAllowed:!0}]},{goalsNumber:2,soundtrack:"game4",board:[{texture:"water",touchAllowed:!1},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:1.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:2.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"grass-water-bottom",touchAllowed:!0,bonus:"heart",mobile:{type:"snake",orientation:"right",speed:2.5,repeated:!1}},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1.5}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:2}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:2}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1.5}},{texture:"grass",touchAllowed:!0}]},{goalsNumber:1,soundtrack:"game5",board:[{texture:"water",touchAllowed:!1},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:2}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:3}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1.5}},{texture:"grass-water-bottom",touchAllowed:!0,bonus:"star",mobile:{type:"snake",orientation:"right",speed:2.5}},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1.5}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:2}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:2.5}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1}},{texture:"grass",touchAllowed:!0}]}]}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(e){this.basePath=e,this.sounds={}}return e.prototype.register=function(e,t){if(this.sounds[e])throw new Error("A sound is already registered with the '"+e+"' identifier.");this.sounds[e]=new Howl({src:this.basePath+"/"+t})},e.prototype.registerMap=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.register(n.name,n.file)}},e.prototype.play=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=1),!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var n=this.sounds[e];n.off("fade"),n.volume(i),n.loop(t),n.play()},e.prototype.stop=function(e){if(!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");this.sounds[e].stop()},e.prototype.fadeIn=function(e,t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=1),!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");this.play(e,i,0),this.sounds[e].fade(0,n,t)},e.prototype.fadeOut=function(e,t){if(!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var i=this.sounds[e];i.on("fade",function(){i.stop()}),i.fade(i.volume(),0,t)},e.prototype.mute=function(e){for(var t in this.sounds)this.sounds.hasOwnProperty(t)&&this.sounds[t].mute(e)},e}();e.AudioManager=t}(t=e.Audio||(e.Audio={}))}(FroggerJS||(FroggerJS={}));var Utils;!function(e){var t=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){t||(t=this),this.handlers.push({handler:e,context:t})},e.prototype.unregister=function(e,t){t||(t=this),this.handlers=this.handlers.filter(function(i){return i.handler!==e&&i.context!==t})},e.prototype.invoke=function(e){this.handlers.slice(0).forEach(function(t){return t.handler.call(t.context,e)})},e}();e.Event=t}(Utils||(Utils={}));var FroggerJS;!function(e){var t;!function(e){var t=Utils.Event,i=function(){function e(e){this.resourcesCount=0,this.loadedResourcesCount=0,this.onProgressChanged=new t,this.onLoadingCompleted=new t,this.loader=PIXI.loader,this.baseResourcesPath=e;var i=this;this.loader.on("progress",function(e){++i.loadedResourcesCount,i.resourcesCount>0&&i.onProgressChanged.invoke(Math.floor(i.loadedResourcesCount/i.resourcesCount*100)+"%")}),this.loader.once("complete",function(){i.onLoadingCompleted.invoke()})}return e.prototype.register=function(e,t){if(this.loader.resources[e])throw new Error("An image is already registered with the '"+e+"' identifier.");this.loader.add(e,this.baseResourcesPath+"/"+t),++this.resourcesCount},e.prototype.registerMap=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.register(n.name,n.file)}},e.prototype.get=function(e){if(!this.loader.resources[e])throw new Error('The "'+e+"\" doesn't exist in the resources.");return this.loader.resources[e].texture},e.prototype.load=function(){this.loader.load()},e}();e.ImageLoader=i}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){function t(e){return void 0!==e.getDisplayObject&&e.getDisplayObject()instanceof PIXI.DisplayObject}e.isRenderable=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.container=new PIXI.Container}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.addChild=function(e){e instanceof PIXI.DisplayObject?this.container.addChild(e):this.container.addChild(e.getDisplayObject())},e.prototype.removeChild=function(e){e instanceof PIXI.DisplayObject?this.container.removeChild(e):this.container.removeChild(e.getDisplayObject())},e.prototype.clear=function(){this.container.removeChildren()},e}();e.Container=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(e){function t(t,i){e.call(this),this.width=t,this.height=i,this.renderer=PIXI.autoDetectRenderer(t,i,{resolution:window.devicePixelRatio}),this.resize(),document.body.appendChild(this.renderer.view),window.addEventListener("resize",this.resize.bind(this))}return __extends(t,e),t.prototype.update=function(e){this.renderer.render(this.container)},t.prototype.resize=function(){var e=Math.min(window.innerWidth/this.width,window.innerHeight/this.height);this.container.scale.x=this.container.scale.y=e,this.renderer.resize(Math.ceil(this.width*e),Math.ceil(this.height*e))},t}(e.Container);e.Scene=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.ticker=PIXI.ticker.shared,this.ticker.autoStart=!1,this.ticker.stop()}return e.prototype.register=function(e){this.ticker.add(e.update,e)},e.prototype.unregister=function(e){this.ticker.remove(e.update,e)},e.prototype.start=function(){this.ticker.start()},e.prototype.stop=function(){this.ticker.stop()},e}();e.Ticker=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Constants,n=Utils.Event,r=function(){function e(){}return e.getAvailableLives=function(){return e.availableLives},e.setAvailableLives=function(t){if(t<0)throw new Error("Negative live count.");e.availableLives=t,e.onLivesCountChanged.invoke()},e.getScore=function(){return e.score},e.increaseScore=function(t){e.score+=t,e.onScoreChanged.invoke()},e.reset=function(){e.score=0,e.availableLives=i.AVAILABLE_LIVES},e.availableLives=i.AVAILABLE_LIVES,e.score=0,e.onLivesCountChanged=new n,e.onScoreChanged=new n,e}();t.GameData=r}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){!function(e){e[e.None=0]="None",e[e.Inverse=1]="Inverse",e[e.Same=2]="Same"}(e.InterpolationRepetition||(e.InterpolationRepetition={}));e.InterpolationRepetition}(t=e.Math||(e.Math={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e){if(e.minValue>e.maxValue)throw new Error("The minimum must be less than the maximum.");if(e.maxValue<e.minValue)throw new Error("The maximum must be higher than the minimum.");if(this.minValue=e.minValue,this.maxValue=e.maxValue,this.increment=e.increment,this.sign=e.sign?e.sign:t.DEFAULT_SIGN,this.repetition=e.repetition?e.repetition:t.DEFAULT_REPETITION,this.currentValue=void 0!==e.initialValue?e.initialValue:e.minValue,this.sign!=-1&&1!=this.sign)throw new Error("The sign must be 1 or -1.");if(this.minValue>this.currentValue||this.maxValue<this.currentValue)throw new Error("The initial value must be bounded by the minimum and the maximum.")}return t.prototype.next=function(e){return void 0===e&&(e=1),this.currentValue+=this.increment*this.sign*e,this.currentValue>=this.maxValue?(this.currentValue=this.maxValue,this.applyRepetition()):this.currentValue<=this.minValue&&(this.currentValue=this.minValue,this.applyRepetition()),this.currentValue},t.prototype.applyRepetition=function(){switch(this.repetition){case e.InterpolationRepetition.Inverse:this.sign=-this.sign;break;case e.InterpolationRepetition.Same:this.currentValue=this.sign>0?this.minValue:this.maxValue}},t.DEFAULT_SIGN=1,t.DEFAULT_REPETITION=e.InterpolationRepetition.None,t}();e.LinearInterpolation=t}(t=e.Math||(e.Math={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Math.InterpolationRepetition,n=e.Math.LinearInterpolation,r=function(e){function t(r,o){e.call(this,r,o),this.interpolation=new n({minValue:t.MIN_LABEL_ALPHA,maxValue:t.MAX_LABEL_ALPHA,increment:t.LABEL_ALPHA_INCREMENT,repetition:i.Inverse})}return __extends(t,e),t.prototype.update=function(e){this.alpha=this.interpolation.next(e)},t.LABEL_ALPHA_INCREMENT=.012,t.MAX_LABEL_ALPHA=1,t.MIN_LABEL_ALPHA=.35,t}(PIXI.Text);t.AnimatedText=r}(i=t.Controls||(t.Controls={}))}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.AnimatedText,n=e.Constants,r=function(){function e(e){this.container=new PIXI.Container;var t=250,r=.5*n.WINDOW_WIDTH,o=new PIXI.extras.TilingSprite(e.get("background"),n.WINDOW_WIDTH,n.WINDOW_HEIGHT);o.alpha=.9;var a=new PIXI.extras.TilingSprite(e.get("stripe"),n.WINDOW_WIDTH,t);a.y=155;var s=new PIXI.Sprite(e.get("congrats"));s.anchor.x=.5,s.x=r,s.y=215,this.finalScoreText=new PIXI.Text("",{font:"65px Arial",fill:"white"}),this.finalScoreText.anchor.x=.5,this.finalScoreText.x=r,this.finalScoreText.y=915;var l=new PIXI.Sprite(e.get("cup"));l.anchor.x=.5,l.x=r,l.y=520,this.animatedText=new i("PRESS ANY KEY TO CONTINUE",{font:"40px Arial",fill:"white"}),this.animatedText.anchor.x=.5,this.animatedText.x=r,this.animatedText.y=n.WINDOW_HEIGHT-100,this.container.addChild(o),this.container.addChild(a),this.container.addChild(s),this.container.addChild(this.finalScoreText),this.container.addChild(l),this.container.addChild(this.animatedText)}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.update=function(e){this.animatedText.update(e)},e.prototype.setFinalScore=function(e){this.finalScoreText.text="SCORE: "+e},e}();t.GameCompleteView=r}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.GameCompleteView,n=e.Game.GameData,r=Utils.Logger,o=function(){function e(e,t,n,r,o){this.scene=e,this.ticker=n,this.audioManager=r,this.stateManager=o,this.gameCompleteView=new i(t)}return e.prototype.entered=function(){function t(){document.removeEventListener("keydown",t),i.stateManager.change("mainMenu")}r.logMessage("Entered in 'End Game State'."),this.gameCompleteView.setFinalScore(n.getScore()),this.scene.addChild(this.gameCompleteView),this.ticker.register(this.gameCompleteView);var i=this;setTimeout(function(){document.addEventListener("keydown",t)},e.DELAY),this.audioManager.play(e.SOUND_NAME)},e.prototype.leaving=function(){this.ticker.unregister(this.gameCompleteView),r.logMessage("Leaving the 'End Game State'.")},e.DELAY=500,e.SOUND_NAME="win",e}();t.GameCompleteState=o}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.states={}}return e.prototype.register=function(e,t){this.states[e]=t},e.prototype.change=function(e){if(!(e in this.states))throw new Error("The '"+e+"' state doesn't exist.");var t=this.states[e];this.currentState&&this.currentState.leaving(),this.currentState=t,this.currentState.entered()},e}();e.StateManager=t}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Constants,n=function(){function e(){}return e.createBackgroundPanel=function(){var e=new PIXI.Graphics;return e.beginFill(16777215,.5),e.drawRect(0,0,i.WINDOW_WIDTH,i.WINDOW_HEIGHT),e.endFill(),e},e.createPanel=function(e,t){var n=new PIXI.Graphics;return n.beginFill(i.PANEL_COLOR),n.lineStyle(4,0),n.drawRect(0,0,e,t),n.endFill(),n.x=.5*i.WINDOW_WIDTH-.5*e,n.y=.5*i.WINDOW_HEIGHT-.5*t,n},e}();t.PanelFactory=n}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=Utils.Event,i=function(e){function i(i,n,r){function o(){this.buttonPressed=!0,this.clickedTexture&&(this.texture=this.clickedTexture)}function a(){this.isHovered&&this.buttonPressed&&this.onClick.invoke(),this.buttonPressed=!1,this.texture=this.defaultTexture}function s(){this.onHover.invoke(),this.isHovered=!0,this.hoveredTexture&&(this.texture=this.hoveredTexture)}function l(){this.isHovered=!1,this.texture=this.defaultTexture}void 0===n&&(n=""),e.call(this,i),this.isHovered=!1,this.buttonPressed=!1,this.hoveredTexture=void 0,this.clickedTexture=void 0,this.onClick=new t,this.onHover=new t,this.interactive=!0,this.defaultTexture=i,this.on("mouseover",s).on("mouseout",l).on("mousedown",o).on("mouseup",a).on("mouseupoutside",a).on("touchstart",o).on("touchend",a).on("touchendoutside",a),this.text=r?new PIXI.Text(n,r):new PIXI.Text(n),this.text.anchor.x=.5,this.text.anchor.y=.5,this.text.position.y=.5*this.height,this.addChild(this.text)}return __extends(i,e),i}(PIXI.Sprite);e.Button=i}(t=e.Controls||(e.Controls={}))}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.Button,n=e.Constants,r=Utils.Event,o=function(){function e(e){this.surfaceIndex=0,this.timeSpent=0,this.onPlayClicked=new r,this.onBackToMenuClicked=new r,this.container=new PIXI.Container,this.imageLoader=e;var t=.5*n.WINDOW_WIDTH,o=133,a=1200,s=.5*(n.WINDOW_WIDTH-a),l=85,h="HELP THE FROGS TO CROSS THE ROAD AND THE RIVER TO REACH THE DECKS THE OTHER SIDE.\n\nUSE THE ARROW KEYS OF THE KEYBOARD TO MOVE.",u={font:"45px Arial",fill:"white"},c={font:"52px Arial",fill:"white",align:"left",wordWrap:!0,wordWrapWidth:a},g=new PIXI.extras.TilingSprite(e.get("background"),n.WINDOW_WIDTH,n.WINDOW_HEIGHT),d=new PIXI.extras.TilingSprite(e.get("small-stripe"),n.WINDOW_WIDTH,o);d.y=50;var p=new PIXI.Text("DIRECTIONS",{font:"70px Arial",fill:"black"});p.x=s,p.y=80;var f=new PIXI.Text(h,c);f.anchor.x=.5,f.x=t,f.y=250,this.arrowKeysAnimation=new PIXI.Sprite(e.get("arrow-keys-up")),this.arrowKeysAnimation.anchor.x=.5,this.arrowKeysAnimation.x=t,this.arrowKeysAnimation.y=645;var m=e.get("panel-button"),v=e.get("panel-button-hovered"),w=e.get("panel-button-clicked"),y=s+.5*m.width,b=n.WINDOW_HEIGHT-l-m.height,S=new i(m,"MENU",u);S.hoveredTexture=v,S.clickedTexture=w,S.onClick=this.onBackToMenuClicked,S.anchor.x=.5,S.x=y,S.y=b;var I=new i(m,"PLAY",u);I.hoveredTexture=v,I.clickedTexture=w,I.onClick=this.onPlayClicked,I.anchor.x=.5,I.x=n.WINDOW_WIDTH-y,I.y=b,this.container.addChild(g),this.container.addChild(d),this.container.addChild(p),this.container.addChild(f),this.container.addChild(this.arrowKeysAnimation),this.container.addChild(S),this.container.addChild(I)}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.update=function(t){this.timeSpent>=e.DELAY?(this.timeSpent=0,this.surfaceIndex=++this.surfaceIndex%e.ARROW_KEYS.length,this.arrowKeysAnimation.texture=this.imageLoader.get("arrow-keys-"+e.ARROW_KEYS[this.surfaceIndex])):this.timeSpent+=t},e.DELAY=120,e.ARROW_KEYS=["up","right","down","left"],e}();t.GameDirectionsView=o}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.GameDirectionsView,n=Utils.Logger,r=function(){function e(e,t,n,r,o){this.scene=e,this.ticker=n,this.audioManager=r,this.stateManager=o,this.gameDirectionsView=new i(t),this.gameDirectionsView.onBackToMenuClicked.register(function(){this.stateManager.change("mainMenu")},this),this.gameDirectionsView.onPlayClicked.register(function(){this.stateManager.change("level1")},this)}return e.prototype.entered=function(){n.logMessage("Entered in the 'Game Directions State'."),this.scene.addChild(this.gameDirectionsView),this.ticker.register(this.gameDirectionsView),this.audioManager.fadeIn(e.SOUND_NAME,e.SOUND_FADE_DURATION,!0,e.SOUND_VOLUME)},e.prototype.leaving=function(){this.audioManager.fadeOut(e.SOUND_NAME,e.SOUND_FADE_DURATION),this.ticker.unregister(this.gameDirectionsView),this.scene.clear(),n.logMessage("Leaving the 'Game Directions State'.")},e.SOUND_NAME="directions",e.SOUND_FADE_DURATION=500,e.SOUND_VOLUME=.35,e}();t.GameDirectionsState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){function t(e){return void 0!==e.getBounding}e.isCollidable=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Constants,n=e.Math.InterpolationRepetition,r=e.Math.LinearInterpolation,o=function(){function e(e,t){this.interpolation=void 0,this.speed=e,this.orientation=t}return e.prototype.update=function(e){var t=this.getDisplayObject();this.interpolation||(this.interpolation=new r({minValue:-t.width,maxValue:i.WINDOW_WIDTH+t.width,increment:this.speed,sign:"left"==this.orientation?-1:1,initialValue:t.x,repetition:n.Same})),t.position.x=this.interpolation.next(e)},e}();t.Mobile=o}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e,t){this.center=e,this.radius=t}return t.prototype.getCenter=function(){return this.center},t.prototype.getRadius=function(){return this.radius},t.prototype.isCollide=function(i){if(i instanceof e.RectangleBounding){var n=i.getWidth()/2,r=i.getHeight()/2,o=Math.abs(this.center.x-i.getTop().x-n),a=Math.abs(this.center.y-i.getTop().y-r);if(o>n+this.radius)return!1;if(a>r+this.radius)return!1;if(o<=n)return!0;if(a<=r)return!0;var s=o-n,l=a-r;return s*s+l*l<=this.radius*this.radius}if(i instanceof t){var s=this.center.x-i.getCenter().x,l=this.center.y-i.getCenter().y,h=Math.sqrt(s*s+l*l);return h<this.radius+i.getRadius()}throw new Error("Unknown bounding.")},t.prototype.getDisplayObject=function(){var e=new PIXI.Graphics;return e.position=this.center,e.alpha=.5,e.beginFill(16711680),e.drawCircle(0,0,this.radius),e.endFill(),e},t}();e.CircleBounding=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i,n=e.Physics.CircleBounding;!function(e){e[e.Up=38]="Up",e[e.Down=40]="Down",e[e.Left=37]="Left",e[e.Right=39]="Right"}(i||(i={}));var r;!function(e){e[e.Up=0]="Up",e[e.Left=3*Math.PI/2]="Left",e[e.Down=Math.PI]="Down",e[e.Right=Math.PI/2]="Right"}(r||(r={}));var o=function(){function o(a,s){this.tilePosition=void 0,this.deltaPosition=void 0,this.tileExploredPosition=0,this.keyUpTexture=a.get("frog"),this.keyDownTexture=a.get("frog-extend"),this.sprite=new PIXI.Sprite(this.keyUpTexture),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.bounding=new n(this.sprite.position,this.sprite.width*o.BOUNDING_FACTOR),this.startPosition(),this.tileExploredPosition=this.tilePosition;var l=this;this.onKeyDown=function(e){var t=void 0;switch(e.keyCode){case i.Left:t=r.Left;break;case i.Up:t=r.Up;break;case i.Right:t=r.Right;break;case i.Down:t=r.Down}void 0!==t&&(l.sprite.rotation=t,l.sprite.texture=l.keyDownTexture)},this.onKeyUp=function(n){var r=e.Constants.TILE_SIZE;switch(n.keyCode){case i.Left:l.sprite.position.x-r>=0&&(l.sprite.position.x-=r);break;case i.Up:l.sprite.position.y-r>=0&&(l.sprite.position.y-=r);break;case i.Right:l.sprite.position.x+r<=e.Constants.WINDOW_WIDTH&&(l.sprite.position.x+=r);break;case i.Down:l.sprite.position.y+r<=e.Constants.WINDOW_HEIGHT&&(l.sprite.position.y+=r)}l.deltaPosition=void 0,n.keyCode!=i.Up&&n.keyCode!=i.Down||(l.updateTilePosition(),l.tilePosition<l.tileExploredPosition&&(t.GameData.increaseScore(e.Constants.MOVE_SCORE),l.tileExploredPosition=l.tilePosition)),l.sprite.texture==l.keyDownTexture&&(l.sprite.texture=l.keyUpTexture,s.play(o.JUMP_SOUND_NAME))}}return o.prototype.startPosition=function(){this.sprite.rotation=r.Up,this.sprite.position.x=e.Constants.WINDOW_WIDTH/2,this.sprite.position.y=e.Constants.WINDOW_HEIGHT-this.sprite.height/2,this.updateTilePosition()},o.prototype.follow=function(e){this.deltaPosition||(this.deltaPosition=this.sprite.position.x-e.getDisplayObject().position.x),this.sprite.position.x=e.getDisplayObject().position.x+this.deltaPosition},o.prototype.getLinePosition=function(){return this.tilePosition},o.prototype.getDisplayObject=function(){return this.sprite},o.prototype.getBounding=function(){return this.bounding},o.prototype.updateTilePosition=function(){this.tilePosition=Math.floor(this.sprite.position.y/e.Constants.TILE_SIZE)},o.BOUNDING_FACTOR=.3,o.JUMP_SOUND_NAME="jump",o}();t.Actor=o}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){this.availability=!0}return e.prototype.isAvailable=function(){return this.availability},e.prototype.apply=function(){this.availability&&(this.availability=!1,this.applyConcrete(),this.getDisplayObject().visible=!1)},e}();e.Bonus=t}(t=e.Objects||(e.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Game.GameData,n=e.Physics.CircleBounding,r=e.Math.InterpolationRepetition,o=e.Math.LinearInterpolation,a=function(e){function t(i){e.call(this),this.sprite=new PIXI.Sprite(i.get(t.TYPE)),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.bounding=new n(this.sprite.position,this.sprite.width*t.BOUNDING_FACTOR),this.interpolation=new o({minValue:t.MIN_SCALE,maxValue:t.MAX_SCALE,increment:t.SCALE_INCREMENT,repetition:r.Inverse})}return __extends(t,e),t.prototype.applyConcrete=function(){i.setAvailableLives(i.getAvailableLives()+1)},t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.update=function(e){if(this.isAvailable()){var t=this.interpolation.next(e);this.sprite.scale.x=t,this.sprite.scale.y=t}},t.TYPE="heart",t.BOUNDING_FACTOR=.3,t.MIN_SCALE=.8,t.MAX_SCALE=1,t.SCALE_INCREMENT=.005,t}(t.Bonus);t.Heart=a}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Game.GameData,n=e.Physics.CircleBounding,r=e.Math.InterpolationRepetition,o=e.Math.LinearInterpolation,a=function(e){function t(i){e.call(this),this.sprite=new PIXI.Sprite(i.get(t.TYPE)),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.bounding=new n(this.sprite.position,this.sprite.width*t.BOUNDING_FACTOR),this.interpolation=new o({minValue:t.MIN_SCALE,maxValue:t.MAX_SCALE,increment:t.SCALE_INCREMENT,repetition:r.Inverse})}return __extends(t,e),t.prototype.applyConcrete=function(){i.increaseScore(t.SCORE_INCREMENT)},t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.update=function(e){if(this.isAvailable()){var t=this.interpolation.next(e);this.sprite.scale.x=t,this.sprite.scale.y=t}},t.TYPE="star",t.BOUNDING_FACTOR=.3,t.MIN_SCALE=.85,t.MAX_SCALE=1,t.SCALE_INCREMENT=.0025,t.SCORE_INCREMENT=100,t}(t.Bonus);t.Star=a}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.imageLoader=e}return t.prototype.create=function(t){switch(t.toLowerCase()){case e.Heart.TYPE:return new e.Heart(this.imageLoader);case e.Star.TYPE:return new e.Star(this.imageLoader)}throw new Error("The bonus name doesn't exist.")},t}();e.BonusFactory=t}(t=e.Objects||(e.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Constants,n=e.Physics.CircleBounding,r=e.Game.GameData,o=function(){function e(t){this.sprite=new PIXI.Sprite(t.get("goal")),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5,this.bounding=new n(this.sprite.position,this.sprite.width*e.BOUNDING_FACTOR),this.availability=!0}return e.prototype.getDisplayObject=function(){return this.sprite},e.prototype.getBounding=function(){return this.bounding},e.prototype.isAvailable=function(){return this.availability},e.prototype.occupy=function(){this.availability&&(this.availability=!1,r.increaseScore(i.GOAL_SCORE))},e.BOUNDING_FACTOR=.4,e}();t.GoalDeck=o}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e,t,i){this.top=e,this.width=t,this.height=i}return t.prototype.getTop=function(){return this.top},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCollide=function(i){if(i instanceof t)return this.top.x<i.getTop().x+i.getWidth()&&this.top.x+this.width>i.getTop().x&&this.top.y<i.getTop().y+i.getHeight()&&this.height+this.top.y>i.getTop().y;if(i instanceof e.CircleBounding)return i.isCollide(this);throw new Error("Unknown bounding.")},t.prototype.getDisplayObject=function(){var e=new PIXI.Graphics;return e.position=this.top,e.alpha=.5,e.beginFill(255),e.drawRect(0,0,this.width,this.height),e.endFill(),e},t}();e.RectangleBounding=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var Utils;!function(e){var t=function(){function e(){}return e.getRandom=function(){return Math.random()},e.getRandomArbitrary=function(e,t){return Math.random()*(t-e)+e},e.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e},e.getRandomIntInclusive=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},e}();e.Random=t}(Utils||(Utils={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=Utils.Random,n=e.Physics.RectangleBounding,r=function(e){function t(r,o,a){e.call(this,a,o);var s=i.getRandomInt(0,t.availableColors.length),l=r.get(t.TYPE+"-"+t.availableColors[s]+"-"+o);this.sprite=new PIXI.Sprite(l),this.bounding=new n(this.sprite.position,this.sprite.width,this.sprite.height)}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!0},t.TYPE="boat",t.availableColors=["red","yellow","white"],t}(t.Mobile);t.Boat=r}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=Utils.Random,n=e.Physics.RectangleBounding,r=function(e){function t(r,o,a){e.call(this,a,o);var s=i.getRandomInt(0,t.availableColors.length),l=r.get(t.TYPE+"-"+t.availableColors[s]+"-"+o);this.sprite=new PIXI.Sprite(l),this.bounding=new n(this.sprite.position,this.sprite.width,this.sprite.height)}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!1},t.TYPE="car",t.availableColors=["blue","green","red","white"],t}(t.Mobile);t.Car=r}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Math.InterpolationRepetition,n=e.Math.LinearInterpolation,r=e.Physics.RectangleBounding,o=function(e){function t(o,a,s){e.call(this,s,a),this.timeSpent=0,this.imageLoader=o,this.sprite=new PIXI.Sprite(o.get(t.TYPE+"-1-"+a)),this.bounding=new r(this.sprite.position,this.sprite.width,this.sprite.height),this.imageIndex=new n({minValue:1,maxValue:3,increment:1,repetition:i.Inverse})}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!1},t.prototype.update=function(i){e.prototype.update.call(this,i),this.timeSpent>=t.DELAY?(this.sprite.texture=this.imageLoader.get(t.TYPE+"-"+this.imageIndex.next()+"-"+this.orientation),this.timeSpent=0):this.timeSpent+=i;
},t.TYPE="snake",t.DELAY=6,t}(t.Mobile);t.Snake=o}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.imageLoader=e}return t.prototype.create=function(t,i,n){switch(t.toLowerCase()){case e.Car.TYPE:return new e.Car(this.imageLoader,i,n);case e.Boat.TYPE:return new e.Boat(this.imageLoader,i,n);case e.Snake.TYPE:return new e.Snake(this.imageLoader,i,n)}throw new Error("The mobile name doesn't exist.")},t}();e.MobileFactory=t}(t=e.Objects||(e.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.Objects.BonusFactory,n=e.Constants,r=e.Game.Objects.GoalDeck,o=e.Game.Objects.MobileFactory,a=Utils.Random,s=function(){function e(e){this.imageLoader=e,this.bonusFactory=new i(e),this.mobileFactory=new o(e)}return e.prototype.parse=function(e){if(!e.hasOwnProperty("level"))throw new Error("Level property is missing.");if(!e.hasOwnProperty("goalsNumber"))throw new Error("'Goals Number' property is missing.");if(!e.hasOwnProperty("soundtrack"))throw new Error("Soundtrack property is missing.");if(!e.hasOwnProperty("board"))throw new Error("Board property is missing.");if(e.board.length!=n.WINDOW_HEIGHT/n.TILE_SIZE)throw new Error("The level configuration isn't valid.");for(var t={level:e.level,soundtrack:e.soundtrack,tiles:[],mobiles:[],bonuses:[],goals:[],touchAllowedStatus:[]},i=2*n.TILE_SIZE,o=.5*n.TILE_SIZE,s=n.WINDOW_WIDTH/n.TILE_SIZE,l=e.board,h=0;h<l.length;++h){if(!l[h].hasOwnProperty("texture"))throw new Error("Texture property is missing.");if(!l[h].hasOwnProperty("touchAllowed"))throw new Error("TouchAllowed property is missing.");t.touchAllowedStatus.push(l[h].touchAllowed),t.tiles[h]=[];for(var u=this.imageLoader.get(l[h].texture),c=0;c<s;++c){var g=new PIXI.Sprite(u);g.x=c*n.TILE_SIZE,g.y=h*n.TILE_SIZE,t.tiles[h].push(g)}if(t.mobiles[h]=[],l[h].hasOwnProperty("mobile")&&(t.mobiles[h]=this.parseMobile(l[h].mobile,h)),l[h].hasOwnProperty("bonus")){var d=this.bonusFactory.create(l[h].bonus),p=d.getDisplayObject();p.x=a.getRandomIntInclusive(i,n.WINDOW_WIDTH-i),p.y=h*n.TILE_SIZE+o,t.bonuses[h]=d}}for(var f=n.WINDOW_WIDTH/(2*e.goalsNumber),h=0;h<e.goalsNumber;++h){var m=new r(this.imageLoader),p=m.getDisplayObject();p.x=f*(2*h+1),p.y=o,t.goals.push(m)}return t},e.prototype.parseMobile=function(e,t){var i=2.5,r=[],o=!0;if(!e.hasOwnProperty("type"))throw new Error("Type property is missing.");if(!e.hasOwnProperty("orientation"))throw new Error("Rotation property is missing.");if(!e.hasOwnProperty("speed"))throw new Error("Speed property is missing.");e.hasOwnProperty("repeated")&&(o=e.repeat);var s=0,l=0;do{var h=this.mobileFactory.create(e.type,e.orientation,e.speed),u=h.getDisplayObject();u.x=s,u.y=t*n.TILE_SIZE,l=u.width,s+=l+a.getRandomIntInclusive(l,i*l),r.push(h)}while(o&&s<n.WINDOW_WIDTH);return r},e}();t.GameLevelParser=s}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.Actor,n=e.Constants,r=Utils.Event,o=Utils.Logger,a=function(){function e(e,i,o){this.isStarted=!1,this.onGameOver=new r,this.onNextLevel=new r,this.imageLoader=e,this.audioManager=i,this.board=new t.Board(n.WINDOW_WIDTH,n.WINDOW_HEIGHT),this.setup(o)}return e.prototype.setup=function(i){o.logMessage("Initialize level "+i.level+"...");var r=new t.GameLevelParser(this.imageLoader),a=r.parse(i);this.soundtrack=a.soundtrack,this.mobiles=a.mobiles,this.bonuses=a.bonuses,this.goals=a.goals,this.touchAllowedStatus=a.touchAllowedStatus,1==a.level&&t.GameData.reset();for(var s=0;s<a.tiles.length;++s)for(var l=0;l<a.tiles[s].length;++l)this.board.addChild(a.tiles[s][l]);for(var s=0;s<this.mobiles.length;++s)for(var l=0;l<this.mobiles[s].length;++l)this.board.addChild(this.mobiles[s][l]);for(var s=0;s<this.bonuses.length;++s)this.bonuses[s]&&this.board.addChild(this.bonuses[s]);for(var s=0;s<this.goals.length;++s)this.board.addChild(this.goals[s]);this.labels={livesCount:new PIXI.Text(e.LIVES_BASE_TEXT+" "+t.GameData.getAvailableLives(),n.DEFAULT_TEXT_STYLE),currentLevel:new PIXI.Text("LEVEL "+i.level,n.DEFAULT_TEXT_STYLE),score:new PIXI.Text(e.SCORE_BASE_TEXT+" "+t.GameData.getScore(),n.DEFAULT_TEXT_STYLE)};var h=n.WINDOW_HEIGHT/n.TILE_SIZE*n.TILE_SIZE-n.DEFAULT_TEXT_MARGIN;this.labels.livesCount.anchor.x=1,this.labels.score.anchor.x=1,this.labels.livesCount.anchor.y=1,this.labels.currentLevel.anchor.y=1,this.labels.score.anchor.y=1,this.labels.livesCount.x=n.WINDOW_WIDTH-n.DEFAULT_TEXT_MARGIN,this.labels.currentLevel.x=n.DEFAULT_TEXT_MARGIN,this.labels.score.x=n.WINDOW_WIDTH-4*n.DEFAULT_TEXT_MARGIN-this.labels.livesCount.width,this.labels.livesCount.y=h,this.labels.currentLevel.y=h,this.labels.score.y=h,this.board.addChild(this.labels.livesCount),this.board.addChild(this.labels.currentLevel),this.board.addChild(this.labels.score),this.generateActor(),t.GameData.onLivesCountChanged.register(this.updateLifeText,this),t.GameData.onScoreChanged.register(this.updateScoreText,this),o.logMessage("Level initialized.")},e.prototype.start=function(){this.bindEventListener(),this.audioManager.fadeIn(this.soundtrack,e.SOUNDTRACK_FADE_DURATION,!0,e.SOUNDTRACK_VOLUME),this.isStarted=!0},e.prototype.dispose=function(){this.audioManager.fadeOut(this.soundtrack,e.SOUNDTRACK_FADE_DURATION),t.GameData.onLivesCountChanged.unregister(this.updateLifeText,this),t.GameData.onScoreChanged.register(this.updateScoreText,this),this.unbindEventListener()},e.prototype.getBoard=function(){return this.board},e.prototype.update=function(t){for(var i=0;i<this.mobiles.length;++i){for(var n=!1,r=0;r<this.mobiles[i].length;++r)if(this.mobiles[i][r].update(t),this.actor.getLinePosition()==i){var o=this.mobiles[i][r];o.getBounding().isCollide(this.actor.getBounding())&&(n=!0,o.canBeHit()?this.actor.follow(o):(this.audioManager.play(e.HIT_SOUND_NAME),this.restart()))}if(0==this.actor.getLinePosition())for(var a=0;a<this.goals.length;++a){var s=this.goals[a];if(s.isAvailable()&&s.getBounding().isCollide(this.actor.getBounding())){n=!0,s.occupy();var l=this.goals.filter(function(e){return e.isAvailable()}).length;if(this.actor.getDisplayObject().x=s.getDisplayObject().x,this.actor.getDisplayObject().y=s.getDisplayObject().y,0==l)return void this.onNextLevel.invoke();this.generateActor()}}this.actor.getLinePosition()!=i||n||this.touchAllowedStatus[i]||(this.audioManager.play(e.FALL_SOUND_NAME),this.restart())}for(var i=0;i<this.bonuses.length;++i)if(this.bonuses[i]){var h=this.bonuses[i];h.update(t),h.isAvailable()&&h.getBounding().isCollide(this.actor.getBounding())&&(h.apply(),this.audioManager.play(e.BONUS_SOUND_NAME))}this.board.getBounding().isCollide(this.actor.getBounding())||(this.audioManager.play(e.FALL_SOUND_NAME),this.restart())},e.prototype.generateActor=function(){this.actor&&this.unbindEventListener(),this.actor=new i(this.imageLoader,this.audioManager),this.isStarted&&this.bindEventListener(),this.board.addChild(this.actor)},e.prototype.bindEventListener=function(){document.addEventListener("keydown",this.actor.onKeyDown),document.addEventListener("keyup",this.actor.onKeyUp)},e.prototype.unbindEventListener=function(){document.removeEventListener("keydown",this.actor.onKeyDown),document.removeEventListener("keyup",this.actor.onKeyUp)},e.prototype.restart=function(){this.actor.startPosition();var e=t.GameData.getAvailableLives()-1;t.GameData.setAvailableLives(e),o.logMessage("One live lost. "+e+" live(s) remaining."),e<=0&&this.onGameOver.invoke()},e.prototype.updateLifeText=function(){this.labels.livesCount.text=e.LIVES_BASE_TEXT+" "+t.GameData.getAvailableLives()},e.prototype.updateScoreText=function(){this.labels.score.text=e.SCORE_BASE_TEXT+" "+t.GameData.getScore()},e.BONUS_SOUND_NAME="bonus",e.FALL_SOUND_NAME="drop",e.HIT_SOUND_NAME="hit",e.LIVES_BASE_TEXT="❤ ×",e.SCORE_BASE_TEXT="SCORE:",e.SOUNDTRACK_FADE_DURATION=500,e.SOUNDTRACK_VOLUME=.35,e}();t.GameLevel=a}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.AnimatedText,n=function(){function e(n){var r=.5*e.PANEL_WIDTH;this.container=new PIXI.Container;var o=t.PanelFactory.createPanel(e.PANEL_WIDTH,e.PANEL_HEIGHT),a=new PIXI.Text("LEVEL "+n,{font:"60px Arial",fill:"white"});a.anchor.x=.5,a.x=r,a.y=40,o.addChild(a),this.animatedLabel=new i("PRESS ANY KEY TO START",{font:"30px Arial",fill:"white"}),this.animatedLabel.anchor.x=.5,this.animatedLabel.x=r,this.animatedLabel.y=140,o.addChild(this.animatedLabel),this.container.addChild(t.PanelFactory.createBackgroundPanel()),this.container.addChild(o)}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.update=function(e){this.animatedLabel.update(e)},e.PANEL_WIDTH=600,e.PANEL_HEIGHT=220,e}();t.GameLevelView=n}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.GameLevel,n=e.Views.GameLevelView,r=Utils.Logger,o=function(){function e(e,t,i,n,r,o){this.gameLevelView=void 0,this.gameLevel=void 0,this.scene=e,this.imageLoader=t,this.ticker=i,this.audioManager=n,this.levelConfiguration=r,this.stateManager=o}return e.prototype.entered=function(){function t(){document.removeEventListener("keydown",t),s.scene.removeChild(s.gameLevelView),s.ticker.unregister(s.gameLevelView)}function o(){document.removeEventListener("keyup",o),s.gameLevel.start()}var a=this.levelConfiguration.level;r.logMessage("Entered in 'Game Level "+a+" State'."),this.gameLevel=new i(this.imageLoader,this.audioManager,this.levelConfiguration),this.gameLevel.onGameOver.register(this.gameOverOccurred,this),this.gameLevel.onNextLevel.register(this.nextLevelOccurred,this),this.gameLevelView=new n(a),this.scene.clear(),this.scene.addChild(this.gameLevel.getBoard()),this.scene.addChild(this.gameLevelView),this.ticker.register(this.gameLevel),this.ticker.register(this.gameLevelView);var s=this;document.addEventListener("keydown",t),document.addEventListener("keyup",o),a>1&&this.audioManager.play(e.NEXT_LEVEL_SOUND_NAME)},e.prototype.leaving=function(){this.ticker.unregister(this.gameLevel),this.gameLevel.onGameOver.unregister(this.gameOverOccurred,this),this.gameLevel.onNextLevel.unregister(this.nextLevelOccurred,this),this.gameLevel.dispose(),r.logMessage("Leaving the 'Game Level "+this.levelConfiguration.level+" State'.")},e.prototype.gameOverOccurred=function(){this.stateManager.change("gameOver")},e.prototype.nextLevelOccurred=function(){var e=this.levelConfiguration.level+1;this.levelConfiguration.levelsCount<e?this.stateManager.change("gameComplete"):this.stateManager.change("level"+e)},e.NEXT_LEVEL_SOUND_NAME="next-level",e}();t.GameLevelState=o}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.Button,n=Utils.Event,r=function(){function e(r){this.onReplayClicked=new n,this.onBackToMenuClicked=new n;var o=.5*e.PANEL_WIDTH,a={font:"45px Arial",fill:"white"};this.container=new PIXI.Container;var s=t.PanelFactory.createPanel(e.PANEL_WIDTH,e.PANEL_HEIGHT),l=new PIXI.Text("GAME OVER",{font:"60px Arial",fill:"white"});l.anchor.x=.5,l.x=o,l.y=50,s.addChild(l);var h=r.get("panel-button"),u=r.get("panel-button-hovered"),c=r.get("panel-button-clicked"),g=new i(h,"REPLAY",a);g.hoveredTexture=u,g.clickedTexture=c,g.onClick=this.onReplayClicked,g.anchor.x=.5,g.x=o,g.y=170;var d=new i(h,"MENU",a);d.hoveredTexture=u,d.clickedTexture=c,d.onClick=this.onBackToMenuClicked,d.anchor.x=.5,d.x=o,d.y=275,s.addChild(g),s.addChild(d),s.addChild(g),this.container.addChild(t.PanelFactory.createBackgroundPanel()),this.container.addChild(s)}return e.prototype.getDisplayObject=function(){return this.container},e.PANEL_WIDTH=600,e.PANEL_HEIGHT=400,e}();t.GameOverView=r}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.GameOverView,n=Utils.Logger,r=function(){function e(e,t,n,r){this.scene=e,this.audioManager=n,this.stateManager=r,this.gameOverView=new i(t),this.gameOverView.onReplayClicked.register(function(){this.stateManager.change("level1")},this),this.gameOverView.onBackToMenuClicked.register(function(){this.stateManager.change("mainMenu")},this)}return e.prototype.entered=function(){n.logMessage("Entered in the 'Game Over State'."),this.scene.addChild(this.gameOverView),this.audioManager.play(e.SOUND_NAME,!1,e.SOUND_VOLUME)},e.prototype.leaving=function(){this.scene.clear(),n.logMessage("Leaving the 'Game Over State'.")},e.SOUND_NAME="game-over",e.SOUND_VOLUME=.7,e}();t.GameOverState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.Button,n=e.Constants,r=Utils.Event,o=function(){function e(e){this.onPlayClicked=new r,this.onDirectionsClicked=new r,this.container=new PIXI.Container;var t=20,o=250,a=.7,s={font:"60px Arial",fill:"white"},l={font:"28px Arial",fill:"white"},h=.5*n.WINDOW_WIDTH,u=new PIXI.extras.TilingSprite(e.get("background"),n.WINDOW_WIDTH,n.WINDOW_HEIGHT),c=new PIXI.extras.TilingSprite(e.get("stripe"),n.WINDOW_WIDTH,o);c.y=155;var g=new PIXI.Sprite(e.get("menu-logo"));g.anchor.x=.5,g.x=h,g.y=195;var d=e.get("menu-button"),p=e.get("menu-button-hovered"),f=e.get("menu-button-clicked"),m=new i(d,"PLAY",s);m.hoveredTexture=p,m.clickedTexture=f,m.onClick=this.onPlayClicked,m.anchor.x=.5,m.x=h,m.y=550;var v=new i(d,"DIRECTIONS",s);v.hoveredTexture=p,v.clickedTexture=f,v.onClick=this.onDirectionsClicked,v.anchor.x=.5,v.x=h,v.y=700;var w=new PIXI.Text("© Antoine Béland | MIT License",l);w.alpha=a,w.anchor.y=1,w.x=t,w.y=n.WINDOW_HEIGHT-t;var y=new PIXI.Text("v"+n.VERSION,l);y.alpha=a,y.anchor.x=1,y.anchor.y=1,y.x=n.WINDOW_WIDTH-t,y.y=n.WINDOW_HEIGHT-t,this.container.addChild(u),this.container.addChild(c),this.container.addChild(g),this.container.addChild(m),this.container.addChild(v),this.container.addChild(w),this.container.addChild(y)}return e.prototype.getDisplayObject=function(){return this.container},e}();t.MainMenuView=o}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=Utils.Logger,n=e.Views.MainMenuView,r=function(){function e(e,t,i,r){this.scene=e,this.audioManager=i,this.stateManager=r,this.mainMenuView=new n(t),this.mainMenuView.onPlayClicked.register(function(){this.stateManager.change("level1")},this),this.mainMenuView.onDirectionsClicked.register(function(){this.stateManager.change("gameDirections")},this)}return e.prototype.entered=function(){i.logMessage("Entered in 'Main Menu State'."),this.scene.clear(),this.scene.addChild(this.mainMenuView),this.audioManager.fadeIn(e.SOUND_NAME,e.SOUND_FADE_DURATION,!0,e.SOUND_VOLUME)},e.prototype.leaving=function(){this.audioManager.fadeOut(e.SOUND_NAME,e.SOUND_FADE_DURATION),this.scene.clear(),i.logMessage("Leaving the 'Main Menu State'.")},e.SOUND_NAME="menu",e.SOUND_FADE_DURATION=500,e.SOUND_VOLUME=.6,e}();t.MainMenuState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t=e.Audio.AudioManager,i=e.Constants,n=e.States.GameCompleteState,r=e.States.GameDirectionsState,o=e.States.GameLevelState,a=e.States.GameOverState,s=e.Graphics.ImageLoader,l=Utils.Logger,h=Utils.LogLevel,u=e.States.MainMenuState,c=e.Graphics.Scene,g=e.States.StateManager,d=e.Graphics.Ticker,p=function(){function p(){}return p.initialize=function(){l.activeLogLevel=i.ACTIVE_LOG_LEVEL,PIXI.utils._saidHello=!0,l.logMessage("Initialize Frogger.js...",h.Info),l.logMessage("Loading resources...",h.Info);var f=new t("assets/sounds");f.registerMap(p.resources.sounds),f.mute(i.AUDIO_MUTED);var m=new s("assets/sprites");m.registerMap(p.resources.sprites);var v=document.querySelector(".progress-bar");m.onProgressChanged.register(function(e){v.style.width=e,v.innerText=e}),m.onLoadingCompleted.register(function(){document.getElementById("loading-panel").style.display="none",l.logMessage("Resources loaded.",h.Info);var t=new d,s=new c(i.WINDOW_WIDTH,i.WINDOW_HEIGHT),p=new g;p.register("mainMenu",new u(s,m,f,p)),p.register("gameDirections",new r(s,m,t,f,p)),p.register("gameOver",new a(s,m,f,p)),p.register("gameComplete",new n(s,m,t,f,p));for(var v=1,w=0,y=e.Levels;w<y.length;w++){var b=y[w];b.level=v,b.levelsCount=e.Levels.length,p.register("level"+v,new o(s,m,t,f,b,p)),++v}p.change("mainMenu"),t.register(s),t.start()}),m.load()},p.resources={sprites:[{name:"arrow-keys-down",file:"arrow-keys-down.png"},{name:"arrow-keys-left",file:"arrow-keys-left.png"},{name:"arrow-keys-right",file:"arrow-keys-right.png"},{name:"arrow-keys-up",file:"arrow-keys-up.png"},{name:"boat-red-left",file:"boat-red-left.png"},{name:"boat-red-right",file:"boat-red-right.png"},{name:"boat-white-left",file:"boat-white-left.png"},{name:"boat-white-right",file:"boat-white-right.png"},{name:"boat-yellow-left",file:"boat-yellow-left.png"},{name:"boat-yellow-right",file:"boat-yellow-right.png"},{name:"car-blue-left",file:"car-blue-left.png"},{name:"car-blue-right",file:"car-blue-right.png"},{name:"car-green-left",file:"car-green-left.png"},{name:"car-green-right",file:"car-green-right.png"},{name:"car-red-left",file:"car-red-left.png"},{name:"car-red-right",file:"car-red-right.png"},{name:"car-white-left",file:"car-white-left.png"},{name:"car-white-right",file:"car-white-right.png"},{name:"congrats",file:"congrats.png"},{name:"cup",file:"cup.png"},{name:"frog",file:"frog.png"},{name:"frog-extend",file:"frog-extend.png"},{name:"goal",file:"goal.png"},{name:"heart",file:"heart.png"},{name:"background",file:"background.png"},{name:"menu-button",file:"menu-button.png"},{name:"menu-button-hovered",file:"menu-button-hovered.png"},{name:"menu-button-clicked",file:"menu-button-clicked.png"},{name:"menu-logo",file:"menu-logo.png"},{name:"small-stripe",file:"small-stripe.png"},{name:"snake-1-left",file:"snake-1-left.png"},{name:"snake-1-right",file:"snake-1-right.png"},{name:"snake-2-left",file:"snake-2-left.png"},{name:"snake-2-right",file:"snake-2-right.png"},{name:"snake-3-left",file:"snake-3-left.png"},{name:"snake-3-right",file:"snake-3-right.png"},{name:"stripe",file:"stripe.png"},{name:"grass",file:"grass.png"},{name:"grass-water-top",file:"grass-water-top.png"},{name:"grass-water-bottom",file:"grass-water-bottom.png"},{name:"water",file:"water.png"},{name:"road-top",file:"road-top.png"},{name:"road-middle-top",file:"road-middle-top.png"},{name:"road-middle-bottom",file:"road-middle-bottom.png"},{name:"road-bottom",file:"road-bottom.png"},{name:"panel-button",file:"panel-button.png"},{name:"panel-button-hovered",file:"panel-button-hovered.png"},{name:"panel-button-clicked",file:"panel-button-clicked.png"},{name:"star",file:"star.png"}],sounds:[{name:"bonus",file:"bonus.wav"},{name:"directions",file:"directions.wav"},{name:"drop",file:"drop.mp3"},{name:"game1",file:"game1.wav"},{name:"game2",file:"game2.wav"},{name:"game3",file:"game3.wav"},{name:"game4",file:"game4.wav"},{name:"game5",file:"game5.wav"},{name:"game-over",file:"game-over.wav"},{name:"hit",file:"hit.mp3"},{name:"jump",file:"jump.mp3"},{name:"menu",file:"menu.wav"},{name:"next-level",file:"next-level.wav"},{name:"win",file:"win.wav"}]},p}();e.App=p}(FroggerJS||(FroggerJS={})),FroggerJS.App.initialize();var FroggerJS;!function(e){var t;!function(t){var i=e.Graphics.Container,n=e.Physics.isCollidable,r=e.Graphics.isRenderable,o=e.Physics.RectangleBounding,a=function(t){function i(e,i){t.call(this),this.bounding=new o(new PIXI.Point(0,0),e,i)}return __extends(i,t),i.prototype.addChild=function(i){(i instanceof PIXI.DisplayObject||r(i))&&t.prototype.addChild.call(this,i),e.Constants.DISPLAY_BOUNDING&&n(i)&&this.container.addChild(i.getBounding().getDisplayObject())},i.prototype.getBounding=function(){return this.bounding},i}(i);t.Board=a}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));