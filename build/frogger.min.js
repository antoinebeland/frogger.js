var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},FroggerJS;!function(e){e.Constants={TILE_SIZE:120,WINDOW_WIDTH:1560,WINDOW_HEIGHT:1200,AUDIO_MUTED:!1,DISPLAY_BOUNDING:!1,AVAILABLE_LIVES:5,DEFAULT_TEXT_STYLE:{font:"40px Arial",fill:"white"},DEFAULT_TEXT_MARGIN:15,PANEL_COLOR:884404},e.Levels=[{goalsNumber:1,soundtrack:"game1",board:[{texture:"grass-water-top",touchAllowed:!0},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:1.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"grass-water-bottom",touchAllowed:!0},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1.5}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1.5}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1}},{texture:"grass",touchAllowed:!0}]},{goalsNumber:1,soundtrack:"game2",board:[{texture:"grass-water-top",touchAllowed:!0},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:1}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:2.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"grass-water-bottom",touchAllowed:!0},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:2}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:2}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1}},{texture:"grass",touchAllowed:!0}]}]}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(e){this.basePath=e,this.sounds={}}return e.prototype.register=function(e,t){if(this.sounds[e])throw new Error("A sound is already registered with the '"+e+"' identifier.");this.sounds[e]=new Howl({src:this.basePath+"/"+t})},e.prototype.registerMap=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.register(n.name,n.fileName)}},e.prototype.play=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=1),!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var n=this.sounds[e];n.off("fade"),n.volume(i),n.loop(t),n.play()},e.prototype.stop=function(e){if(!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");this.sounds[e].stop()},e.prototype.fadeIn=function(e,t,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=1),!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");this.play(e,i,0),this.sounds[e].fade(0,n,t)},e.prototype.fadeOut=function(e,t){if(!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var i=this.sounds[e];i.on("fade",function(){i.stop()}),i.fade(i.volume(),0,t)},e.prototype.mute=function(e){for(var t in this.sounds)this.sounds.hasOwnProperty(t)&&this.sounds[t].mute(e)},e}();e.AudioManager=t}(t=e.Audio||(e.Audio={}))}(FroggerJS||(FroggerJS={}));var Utils;!function(e){var t=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){t||(t=this),this.handlers.push({handler:e,context:t})},e.prototype.unregister=function(e,t){t||(t=this),this.handlers=this.handlers.filter(function(i){return i.handler!==e&&i.context!==t})},e.prototype.invoke=function(e){this.handlers.slice(0).forEach(function(t){return t.handler.call(t.context,e)})},e}();e.Event=t}(Utils||(Utils={}));var FroggerJS;!function(e){var t;!function(e){var t=Utils.Event,i=function(){function e(e){this.onLoadingCompleted=new t,this.loader=PIXI.loader,this.baseResourcesPath=e;var i=this;this.loader.once("complete",function(){i.onLoadingCompleted.invoke()})}return e.prototype.register=function(e,t){if(this.loader.resources[e])throw new Error("An image is already registered with the '"+e+"' identifier.");this.loader.add(e,this.baseResourcesPath+"/"+t)},e.prototype.registerMap=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];this.register(n.name,n.fileName)}},e.prototype.get=function(e){if(!this.loader.resources[e])throw new Error('The "'+e+"\" doesn't exist in the resources.");return this.loader.resources[e].texture},e.prototype.load=function(){this.loader.load()},e}();e.ImageLoader=i}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){function t(e){return void 0!==e.getDisplayObject&&e.getDisplayObject()instanceof PIXI.DisplayObject}e.isRenderable=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.container=new PIXI.Container}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.addChild=function(e){e instanceof PIXI.DisplayObject?this.container.addChild(e):this.container.addChild(e.getDisplayObject())},e.prototype.removeChild=function(e){e instanceof PIXI.DisplayObject?this.container.removeChild(e):this.container.removeChild(e.getDisplayObject())},e.prototype.clear=function(){this.container.removeChildren()},e}();e.Container=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(e){function t(t,i){e.call(this),this.width=t,this.height=i,this.renderer=PIXI.autoDetectRenderer(t,i,{resolution:window.devicePixelRatio}),this.resize(),document.body.appendChild(this.renderer.view),window.addEventListener("resize",this.resize.bind(this))}return __extends(t,e),t.prototype.update=function(e){this.renderer.render(this.container)},t.prototype.resize=function(){var e=Math.min(window.innerWidth/this.width,window.innerHeight/this.height);this.container.scale.x=this.container.scale.y=e,this.renderer.resize(Math.ceil(this.width*e),Math.ceil(this.height*e))},t}(e.Container);e.Scene=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.ticker=PIXI.ticker.shared,this.ticker.autoStart=!1,this.ticker.stop()}return e.prototype.register=function(e){this.ticker.add(e.update,e)},e.prototype.unregister=function(e){this.ticker.remove(e.update,e)},e.prototype.start=function(){this.ticker.start()},e.prototype.stop=function(){this.ticker.stop()},e}();e.Ticker=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var Utils;!function(e){!function(e){e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(e.LogLevel||(e.LogLevel={}));var t=e.LogLevel,i=function(){function e(){}return e.logMessage=function(i,n){if(void 0===n&&(n=t.Debug),!(e.activeLogLevel>n))switch(n){case t.Debug:console.log("[DEBUG] "+i);break;case t.Info:console.info("[INFO] "+i);break;case t.Warning:console.warn("[WARNING] "+i);break;case t.Error:console.error("[ERROR] "+i)}},e.activeLogLevel=t.Debug,e}();e.Logger=i}(Utils||(Utils={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(t,i){e.call(this,t,i),this.animationFactor=1}return __extends(t,e),t.prototype.update=function(e){var i=this.alpha+t.LABEL_ALPHA_FACTOR*this.animationFactor*e;i>=t.MAX_LABEL_ALPHA?(i=t.MAX_LABEL_ALPHA,this.animationFactor=-1):i<=t.MIN_LABEL_ALPHA&&(i=t.MIN_LABEL_ALPHA,this.animationFactor=1),this.alpha=i},t.LABEL_ALPHA_FACTOR=.012,t.MAX_LABEL_ALPHA=1,t.MIN_LABEL_ALPHA=.35,t}(PIXI.Text);e.AnimatedText=t}(t=e.Controls||(e.Controls={}))}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.AnimatedText,n=e.Constants,r=function(){function e(e){this.container=new PIXI.Container;var t=250,r=.5*n.WINDOW_WIDTH,o=new PIXI.extras.TilingSprite(e.get("background"),n.WINDOW_WIDTH,n.WINDOW_HEIGHT);o.alpha=.9;var a=new PIXI.extras.TilingSprite(e.get("stripe"),n.WINDOW_WIDTH,t);a.y=155;var s=new PIXI.Sprite(e.get("congrats"));s.anchor.x=.5,s.x=r,s.y=215;var l=new PIXI.Sprite(e.get("cup"));l.anchor.x=.5,l.x=r,l.y=555,this.animatedLabel=new i("PRESS ANY KEY TO CONTINUE",{font:"40px Arial",fill:"white"}),this.animatedLabel.anchor.x=.5,this.animatedLabel.x=r,this.animatedLabel.y=n.WINDOW_HEIGHT-100,this.container.addChild(o),this.container.addChild(a),this.container.addChild(s),this.container.addChild(l),this.container.addChild(this.animatedLabel)}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.update=function(e){this.animatedLabel.update(e)},e}();t.EndGameView=r}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.EndGameView,n=Utils.Logger,r=function(){function e(e,t,n,r,o){this.scene=e,this.ticker=n,this.audioManager=r,this.stateManager=o,this.endGameView=new i(t)}return e.prototype.entered=function(){function t(){document.removeEventListener("keydown",t),i.stateManager.change("mainMenu")}n.logMessage("Entered in 'End Game State'."),this.scene.addChild(this.endGameView),this.ticker.register(this.endGameView);var i=this;document.addEventListener("keydown",t),this.audioManager.play(e.SOUND_NAME)},e.prototype.leaving=function(){this.ticker.unregister(this.endGameView),n.logMessage("Leaving the 'End Game State'.")},e.SOUND_NAME="win",e}();t.GameCompleteState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.states={}}return e.prototype.register=function(e,t){this.states[e]=t},e.prototype.change=function(e){if(!(e in this.states))throw new Error("The '"+e+"' state doesn't exist.");var t=this.states[e];this.currentState&&this.currentState.leaving(),this.currentState=t,this.currentState.entered()},e}();e.StateManager=t}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){function t(e){return void 0!==e.getBounding}e.isCollidable=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e,t){this.speedDecimal=0,this.speed=e,this.orientation=t}return t.prototype.update=function(t){this.speedDecimal+=this.speed*t;var i=Math.floor(this.speedDecimal);this.speedDecimal=this.speedDecimal%1;var n=this.getDisplayObject();n.position.x+="left"==this.orientation?-i:i,n.position.x>e.Constants.WINDOW_WIDTH+n.width?n.position.x=-n.width:n.position.x<-n.width&&(n.position.x=e.Constants.WINDOW_WIDTH+n.width)},t}();t.Mobile=i}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e,t){this.center=e,this.radius=t}return t.prototype.getCenter=function(){return this.center},t.prototype.getRadius=function(){return this.radius},t.prototype.isCollide=function(i){if(i instanceof e.RectangleBounding){var n=i.getWidth()/2,r=i.getHeight()/2,o=Math.abs(this.center.x-i.getTop().x-n),a=Math.abs(this.center.y-i.getTop().y-r);if(o>n+this.radius)return!1;if(a>r+this.radius)return!1;if(o<=n)return!0;if(a<=r)return!0;var s=o-n,l=a-r;return s*s+l*l<=this.radius*this.radius}if(i instanceof t){var s=this.center.x-i.getCenter().x,l=this.center.y-i.getCenter().y,h=Math.sqrt(s*s+l*l);return h<this.radius+i.getRadius()}throw new Error("Unknown bounding.")},t.prototype.getDisplayObject=function(){var e=new PIXI.Graphics;return e.position=this.center,e.alpha=.5,e.beginFill(16711680),e.drawCircle(0,0,this.radius),e.endFill(),e},t}();e.CircleBounding=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i,n=e.Physics.CircleBounding;!function(e){e[e.Up=38]="Up",e[e.Down=40]="Down",e[e.Left=37]="Left",e[e.Right=39]="Right"}(i||(i={}));var r;!function(e){e[e.Up=0]="Up",e[e.Left=3*Math.PI/2]="Left",e[e.Down=Math.PI]="Down",e[e.Right=Math.PI/2]="Right"}(r||(r={}));var o=function(){function t(t,o){this.tilePosition=void 0,this.deltaPosition=void 0,this.keyUpTexture=t.get("frog"),this.keyDownTexture=t.get("frog-extend"),this.sprite=new PIXI.Sprite(this.keyUpTexture),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5;var a=.3;this.bounding=new n(this.sprite.position,this.sprite.width*a);var s=this;this.onKeyDown=function(e){var t=void 0;switch(e.keyCode){case i.Left:t=r.Left;break;case i.Up:t=r.Up;break;case i.Right:t=r.Right;break;case i.Down:t=r.Down}void 0!==t&&(s.sprite.rotation=t,s.sprite.texture=s.keyDownTexture)},this.onKeyUp=function(t){var n=e.Constants.TILE_SIZE;switch(t.keyCode){case i.Left:s.sprite.position.x-n>=0&&(s.sprite.position.x-=n);break;case i.Up:s.sprite.position.y-n>=0&&(s.sprite.position.y-=n);break;case i.Right:s.sprite.position.x+n<=e.Constants.WINDOW_WIDTH&&(s.sprite.position.x+=n);break;case i.Down:s.sprite.position.y+n<=e.Constants.WINDOW_HEIGHT&&(s.sprite.position.y+=n)}s.deltaPosition=void 0,t.keyCode!=i.Up&&t.keyCode!=i.Down||s.updateTilePosition(),s.sprite.texture==s.keyDownTexture&&(s.sprite.texture=s.keyUpTexture,o.play("jump"))}}return t.loseLife=function(){if(--t.availableLives<0)throw new Error("Negative live count.")},t.getAvailableLives=function(){return t.availableLives},t.setAvailableLives=function(e){if(e<0)throw new Error("Negative live count.");t.availableLives=e},t.prototype.startPosition=function(){this.sprite.rotation=r.Up,this.sprite.position.x=e.Constants.WINDOW_WIDTH/2,this.sprite.position.y=e.Constants.WINDOW_HEIGHT-this.sprite.height/2,this.updateTilePosition()},t.prototype.follow=function(e){this.deltaPosition||(this.deltaPosition=this.sprite.position.x-e.getDisplayObject().position.x),this.sprite.position.x=e.getDisplayObject().position.x+this.deltaPosition},t.prototype.getLinePosition=function(){return this.tilePosition},t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.updateTilePosition=function(){this.tilePosition=Math.floor(this.sprite.position.y/e.Constants.TILE_SIZE)},t.availableLives=5,t}();t.Actor=o}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Physics.CircleBounding,n=function(){function e(e){this.sprite=new PIXI.Sprite(e.get("goal")),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5;var t=.4;this.bounding=new i(this.sprite.position,this.sprite.width*t),this.availability=!0}return e.prototype.getDisplayObject=function(){return this.sprite},e.prototype.getBounding=function(){return this.bounding},e.prototype.isAvailable=function(){return this.availability},e.prototype.setAvailability=function(e){this.availability=e},e}();t.GoalDeck=n}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e,t,i){this.top=e,this.width=t,this.height=i}return t.prototype.getTop=function(){return this.top},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCollide=function(i){if(i instanceof t)return this.top.x<i.getTop().x+i.getWidth()&&this.top.x+this.width>i.getTop().x&&this.top.y<i.getTop().y+i.getHeight()&&this.height+this.top.y>i.getTop().y;if(i instanceof e.CircleBounding)return i.isCollide(this);throw new Error("Unknown bounding.")},t.prototype.getDisplayObject=function(){var e=new PIXI.Graphics;return e.position=this.top,e.alpha=.5,e.beginFill(255),e.drawRect(0,0,this.width,this.height),e.endFill(),e},t}();e.RectangleBounding=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Physics.RectangleBounding,n=function(e){function t(n,r,o){e.call(this,o,r);var a=Math.floor(Math.random()*t.availableColors.length),s=n.get(t.TYPE+"-"+t.availableColors[a]+"-"+r);this.sprite=new PIXI.Sprite(s),this.bounding=new i(this.sprite.position,this.sprite.width,this.sprite.height)}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!0},t.TYPE="boat",t.availableColors=["red","yellow"],t}(t.Mobile);t.Boat=n}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Physics.RectangleBounding,n=function(e){function t(n,r,o){e.call(this,o,r);var a=Math.floor(Math.random()*t.availableColors.length),s=n.get(t.TYPE+"-"+t.availableColors[a]+"-"+r);this.sprite=new PIXI.Sprite(s),this.bounding=new i(this.sprite.position,this.sprite.width,this.sprite.height)}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!1},t.TYPE="car",t.availableColors=["blue","green","red","white"],t}(t.Mobile);t.Car=n}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.imageLoader=e}return t.prototype.createMobile=function(t,i,n){switch(t.toLowerCase()){case e.Car.TYPE:return new e.Car(this.imageLoader,i,n);case e.Boat.TYPE:return new e.Boat(this.imageLoader,i,n)}throw new Error("The mobile name doesn't exist.")},t}();e.MobileFactory=t}(t=e.Objects||(e.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.Objects.GoalDeck,n=e.Game.Objects.MobileFactory,r=function(){function t(e){this.imageLoader=e,this.mobileFactory=new n(e)}return t.prototype.parse=function(t){if(!t.hasOwnProperty("level"))throw new Error("Level property is missing.");if(!t.hasOwnProperty("goalsNumber"))throw new Error("'Goals Number' property is missing.");if(!t.hasOwnProperty("soundtrack"))throw new Error("Soundtrack property is missing.");if(!t.hasOwnProperty("board"))throw new Error("Board property is missing.");if(t.board.length!=e.Constants.WINDOW_HEIGHT/e.Constants.TILE_SIZE)throw new Error("The level configuration isn't valid.");for(var n={level:t.level,soundtrack:t.soundtrack,tiles:[],mobiles:[],goals:[],touchAllowedStatus:[]},r=e.Constants.WINDOW_WIDTH/e.Constants.TILE_SIZE,o=t.board,a=0;a<o.length;++a){if(!o[a].hasOwnProperty("texture"))throw new Error("Texture property is missing.");if(!o[a].hasOwnProperty("touchAllowed"))throw new Error("TouchAllowed property is missing.");n.touchAllowedStatus.push(o[a].touchAllowed),n.tiles[a]=[];for(var s=this.imageLoader.get(o[a].texture),l=0;l<r;++l){var h=new PIXI.Sprite(s);h.x=l*e.Constants.TILE_SIZE,h.y=a*e.Constants.TILE_SIZE,n.tiles[a].push(h)}n.mobiles[a]=[],o[a].hasOwnProperty("mobile")&&(n.mobiles[a]=this.parseMobile(o[a].mobile,a))}for(var c=.5*e.Constants.TILE_SIZE,u=e.Constants.WINDOW_WIDTH/(2*t.goalsNumber),a=0;a<t.goalsNumber;++a){var g=new i(this.imageLoader),d=g.getDisplayObject();d.x=u*(2*a+1),d.y=c,n.goals.push(g)}return n},t.prototype.parseMobile=function(t,i){var n=2.5,r=[];if(!t.hasOwnProperty("type"))throw new Error("Type property is missing.");if(!t.hasOwnProperty("orientation"))throw new Error("Rotation property is missing.");if(!t.hasOwnProperty("speed"))throw new Error("Speed property is missing.");var o=0,a=0;do{var s=this.mobileFactory.createMobile(t.type,t.orientation,t.speed),l=s.getDisplayObject();l.x=o,l.y=i*e.Constants.TILE_SIZE,a=l.width,o+=a+Math.floor(Math.random()*n*a+a),r.push(s)}while(o<e.Constants.WINDOW_WIDTH);return r},t}();t.GameLevelParser=r}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.Actor,n=e.Constants,r=Utils.Event,o=Utils.Logger,a=function(){function e(e,i,o){this.isStarted=!1,this.onGameOver=new r,this.onNextLevel=new r,this.imageLoader=e,this.audioManager=i,this.board=new t.Board(n.WINDOW_WIDTH,n.WINDOW_HEIGHT),this.setup(o)}return e.prototype.setup=function(r){o.logMessage("Initialize level "+r.level+"...");var a=new t.GameLevelParser(this.imageLoader),s=a.parse(r);this.soundtrack=s.soundtrack,this.mobiles=s.mobiles,this.goals=s.goals,this.touchAllowedStatus=s.touchAllowedStatus,1==s.level&&i.setAvailableLives(n.AVAILABLE_LIVES);for(var l=0;l<s.tiles.length;++l)for(var h=0;h<s.tiles[l].length;++h)this.board.addChild(s.tiles[l][h]);for(var l=0;l<this.mobiles.length;++l)for(var h=0;h<this.mobiles[l].length;++h)this.board.addChild(this.mobiles[l][h]);for(var l=0;l<this.goals.length;++l)this.board.addChild(this.goals[l]);this.labels={livesCount:new PIXI.Text(e.LIVES_BASE_TEXT+" "+i.getAvailableLives(),n.DEFAULT_TEXT_STYLE),currentLevel:new PIXI.Text("LEVEL "+r.level,n.DEFAULT_TEXT_STYLE)};var c=n.WINDOW_HEIGHT/n.TILE_SIZE*n.TILE_SIZE-n.DEFAULT_TEXT_MARGIN;this.labels.livesCount.anchor.x=1,this.labels.livesCount.anchor.y=1,this.labels.currentLevel.anchor.y=1,this.labels.livesCount.x=n.WINDOW_WIDTH-n.DEFAULT_TEXT_MARGIN,this.labels.currentLevel.x=n.DEFAULT_TEXT_MARGIN,this.labels.livesCount.y=c,this.labels.currentLevel.y=c,this.board.addChild(this.labels.livesCount),this.board.addChild(this.labels.currentLevel),this.generateActor(),o.logMessage("Level initialized.")},e.prototype.start=function(){this.bindEventListener(),this.audioManager.fadeIn(this.soundtrack,e.SOUNDTRACK_FADE_DURATION,!0,e.SOUNDTRACK_VOLUME),this.isStarted=!0},e.prototype.pause=function(){},e.prototype.dispose=function(){this.audioManager.fadeOut(this.soundtrack,e.SOUNDTRACK_FADE_DURATION),this.unbindEventListener()},e.prototype.getBoard=function(){return this.board},e.prototype.update=function(e){for(var t=0;t<this.mobiles.length;++t){for(var i=!1,n=0;n<this.mobiles[t].length;++n)if(this.mobiles[t][n].update(e),this.actor.getLinePosition()==t){var r=this.mobiles[t][n];r.getBounding().isCollide(this.actor.getBounding())&&(i=!0,r.canBeHit()?this.actor.follow(r):this.restart())}this.actor.getLinePosition()!=t||i||this.touchAllowedStatus[t]||this.restart()}for(var t=0;t<this.goals.length;++t){var o=this.goals[t];if(0==this.actor.getLinePosition()&&o.isAvailable()&&o.getBounding().isCollide(this.actor.getBounding())){o.setAvailability(!1);var a=this.goals.filter(function(e){return e.isAvailable()}).length;if(this.actor.getDisplayObject().x=o.getDisplayObject().x,this.actor.getDisplayObject().y=o.getDisplayObject().y,0==a)return void this.onNextLevel.invoke();this.generateActor()}}this.board.getBounding().isCollide(this.actor.getBounding())||this.restart()},e.prototype.generateActor=function(){this.actor&&this.unbindEventListener(),this.actor=new i(this.imageLoader,this.audioManager),this.actor.startPosition(),this.isStarted&&this.bindEventListener(),this.board.addChild(this.actor)},e.prototype.bindEventListener=function(){document.addEventListener("keydown",this.actor.onKeyDown),document.addEventListener("keyup",this.actor.onKeyUp)},e.prototype.unbindEventListener=function(){document.removeEventListener("keydown",this.actor.onKeyDown),document.removeEventListener("keyup",this.actor.onKeyUp)},e.prototype.restart=function(){this.actor.startPosition(),i.loseLife();var t=i.getAvailableLives();o.logMessage("One live lost. "+t+" live(s) remaining."),this.labels.livesCount.text=e.LIVES_BASE_TEXT+" "+i.getAvailableLives(),t<=0&&this.onGameOver.invoke()},e.SOUNDTRACK_FADE_DURATION=500,e.SOUNDTRACK_VOLUME=.35,e.LIVES_BASE_TEXT="❤ ×",e}();t.GameLevel=a}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Constants,n=function(){function e(){}return e.createBackgroundPanel=function(){var e=new PIXI.Graphics;return e.beginFill(16777215,.5),e.drawRect(0,0,i.WINDOW_WIDTH,i.WINDOW_HEIGHT),e.endFill(),e},e.createPanel=function(e,t){var n=new PIXI.Graphics;return n.beginFill(i.PANEL_COLOR),n.lineStyle(4,0),n.drawRect(0,0,e,t),n.endFill(),n.x=.5*i.WINDOW_WIDTH-.5*e,n.y=.5*i.WINDOW_HEIGHT-.5*t,n},e}();t.PanelFactory=n}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.AnimatedText,n=function(){function e(n){var r=.5*e.PANEL_WIDTH;this.container=new PIXI.Container;var o=t.PanelFactory.createPanel(e.PANEL_WIDTH,e.PANEL_HEIGHT),a=new PIXI.Text("LEVEL "+n,{font:"60px Arial",fill:"white"});a.anchor.x=.5,a.x=r,a.y=40,o.addChild(a),this.animatedLabel=new i("PRESS ANY KEY TO START",{font:"30px Arial",fill:"white"}),this.animatedLabel.anchor.x=.5,this.animatedLabel.x=r,this.animatedLabel.y=140,o.addChild(this.animatedLabel),this.container.addChild(t.PanelFactory.createBackgroundPanel()),this.container.addChild(o)}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.update=function(e){this.animatedLabel.update(e)},e.PANEL_WIDTH=600,e.PANEL_HEIGHT=220,e}();t.GameLevelView=n}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.GameLevel,n=e.Views.GameLevelView,r=Utils.Logger,o=function(){function e(e,t,i,n,r,o){this.gameLevelView=void 0,this.gameLevel=void 0,this.scene=e,this.imageLoader=t,this.ticker=i,this.audioManager=n,this.levelConfiguration=r,this.stateManager=o}return e.prototype.entered=function(){function t(){document.removeEventListener("keydown",t),s.scene.removeChild(s.gameLevelView),s.ticker.unregister(s.gameLevelView)}function o(){document.removeEventListener("keyup",o),s.gameLevel.start()}var a=this.levelConfiguration.level;r.logMessage("Entered in 'Game Level "+a+" State'."),this.gameLevel=new i(this.imageLoader,this.audioManager,this.levelConfiguration),this.gameLevel.onGameOver.register(this.gameOverOccurred,this),this.gameLevel.onNextLevel.register(this.nextLevelOccurred,this),this.gameLevelView=new n(a),this.scene.clear(),this.scene.addChild(this.gameLevel.getBoard()),this.scene.addChild(this.gameLevelView),this.ticker.register(this.gameLevel),this.ticker.register(this.gameLevelView);var s=this;document.addEventListener("keydown",t),document.addEventListener("keyup",o),a>1&&this.audioManager.play(e.NEXT_LEVEL_SOUND_NAME)},e.prototype.leaving=function(){this.ticker.unregister(this.gameLevel),this.gameLevel.onGameOver.unregister(this.gameOverOccurred,this),this.gameLevel.onNextLevel.unregister(this.nextLevelOccurred,this),this.gameLevel.dispose(),r.logMessage("Leaving the 'Game Level "+this.levelConfiguration.level+" State'.")},e.prototype.gameOverOccurred=function(){this.stateManager.change("gameOver")},e.prototype.nextLevelOccurred=function(){var e=this.levelConfiguration.level+1;this.levelConfiguration.levelsCount<e?this.stateManager.change("gameComplete"):this.stateManager.change("level"+e)},e.NEXT_LEVEL_SOUND_NAME="next-level",e}();t.GameLevelState=o}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=Utils.Event,i=function(e){function i(i,n,r){function o(){this.clickedTexture&&(this.texture=this.clickedTexture)}function a(){this.isHovered&&this.onClick.invoke(),this.texture=this.defaultTexture}function s(){this.onHover.invoke(),this.isHovered=!0,this.hoveredTexture&&(this.texture=this.hoveredTexture)}function l(){this.isHovered=!1,this.texture=this.defaultTexture}void 0===n&&(n=""),e.call(this,i),this.isHovered=!1,this.hoveredTexture=void 0,this.clickedTexture=void 0,this.onClick=new t,this.onHover=new t,this.interactive=!0,this.defaultTexture=i,this.on("mouseover",s).on("mouseout",l).on("mousedown",o).on("mouseup",a).on("mouseupoutside",a).on("touchstart",o).on("touchend",a).on("touchendoutside",a),this.text=r?new PIXI.Text(n,r):new PIXI.Text(n),this.text.anchor.x=.5,this.text.anchor.y=.5,this.text.position.y=.5*this.height,this.addChild(this.text)}return __extends(i,e),i}(PIXI.Sprite);e.Button=i}(t=e.Controls||(e.Controls={}))}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.Button,n=Utils.Event,r=function(){function e(r){this.onReplayClicked=new n,this.onBackToMenuClicked=new n;var o=.5*e.PANEL_WIDTH,a={font:"45px Arial",fill:"white"};this.container=new PIXI.Container;var s=t.PanelFactory.createPanel(e.PANEL_WIDTH,e.PANEL_HEIGHT),l=new PIXI.Text("GAME OVER",{font:"60px Arial",fill:"white"});l.anchor.x=.5,l.x=o,l.y=50,s.addChild(l);var h=r.get("panel-button"),c=r.get("panel-button-hovered"),u=r.get("panel-button-clicked"),g=new i(h,"REPLAY",a);g.hoveredTexture=c,g.clickedTexture=u,g.anchor.x=.5,g.x=o,g.y=170,g.onClick=this.onReplayClicked;var d=new i(h,"MENU",a);d.hoveredTexture=c,d.clickedTexture=u,d.anchor.x=.5,d.x=o,d.y=275,d.onClick=this.onBackToMenuClicked,s.addChild(g),s.addChild(d),s.addChild(g),this.container.addChild(t.PanelFactory.createBackgroundPanel()),this.container.addChild(s)}return e.prototype.getDisplayObject=function(){return this.container},e.PANEL_WIDTH=600,e.PANEL_HEIGHT=400,e}();t.GameOverView=r}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.GameOverView,n=Utils.Logger,r=function(){function e(e,t,n,r){this.scene=e,this.audioManager=n,this.stateManager=r,this.gameOverView=new i(t)}return e.prototype.entered=function(){n.logMessage("Entered in the 'Game Over State'."),this.gameOverView.onReplayClicked.register(this.replayOccurred,this),this.gameOverView.onBackToMenuClicked.register(this.backToMenuOccurred,this),this.scene.addChild(this.gameOverView),this.audioManager.play(e.SOUND_NAME,!1,e.SOUND_VOLUME)},e.prototype.leaving=function(){this.scene.clear(),this.gameOverView.onReplayClicked.unregister(this.replayOccurred,this),this.gameOverView.onBackToMenuClicked.unregister(this.backToMenuOccurred,this),n.logMessage("Leaving the 'Game Over State'.")},e.prototype.replayOccurred=function(){this.stateManager.change("level1")},e.prototype.backToMenuOccurred=function(){this.stateManager.change("mainMenu")},e.SOUND_NAME="game-over",e.SOUND_VOLUME=.7,e}();t.GameOverState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.Controls.Button,n=e.Constants,r=Utils.Event,o=function(){function e(e){this.onPlayClicked=new r,this.onSettingsClicked=new r,this.container=new PIXI.Container;var t=250,o={font:"60px Arial",fill:"white"},a=.5*n.WINDOW_WIDTH,s=new PIXI.extras.TilingSprite(e.get("background"),n.WINDOW_WIDTH,n.WINDOW_HEIGHT),l=new PIXI.extras.TilingSprite(e.get("stripe"),n.WINDOW_WIDTH,t);l.y=155;var h=new PIXI.Sprite(e.get("menu-logo"));h.anchor.x=.5,h.x=a,h.y=195;var c=e.get("menu-button"),u=e.get("menu-button-hovered"),g=e.get("menu-button-clicked"),d=new i(c,"PLAY",o);d.hoveredTexture=u,d.clickedTexture=g,d.onClick=this.onPlayClicked,d.anchor.x=.5,d.x=a,d.y=550;var p=new i(c,"SETTINGS",o);p.hoveredTexture=u,p.clickedTexture=g,p.onClick=this.onSettingsClicked,p.anchor.x=.5,p.x=a,p.y=700,this.container.addChild(s),this.container.addChild(l),this.container.addChild(h),this.container.addChild(d),this.container.addChild(p)}return e.prototype.getDisplayObject=function(){return this.container},e}();t.MainMenuView=o}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=Utils.Logger,n=e.Views.MainMenuView,r=function(){function e(e,t,i,r){this.scene=e,this.audioManager=i,this.stateManager=r,this.mainMenuView=new n(t),this.mainMenuView.onPlayClicked.register(function(){this.stateManager.change("level1")},this)}return e.prototype.entered=function(){i.logMessage("Entered in 'Main Menu State'."),this.scene.clear(),this.scene.addChild(this.mainMenuView),this.audioManager.fadeIn(e.SOUND_NAME,e.SOUND_FADE_DURATION,!0,e.SOUND_VOLUME)},e.prototype.leaving=function(){this.audioManager.fadeOut(e.SOUND_NAME,e.SOUND_FADE_DURATION),this.scene.clear(),i.logMessage("Leaving the 'Main Menu State'.")},e.SOUND_NAME="menu",e.SOUND_FADE_DURATION=500,e.SOUND_VOLUME=.6,e}();t.MainMenuState=r}(t=e.States||(e.States={}));
}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t=e.Audio.AudioManager,i=e.States.GameCompleteState,n=e.States.GameLevelState,r=e.States.GameOverState,o=e.Graphics.ImageLoader,a=Utils.Logger,s=Utils.LogLevel,l=e.States.MainMenuState,h=e.Graphics.Scene,c=e.States.StateManager,u=e.Graphics.Ticker,g=function(){function g(){}return g.initialize=function(){a.activeLogLevel=s.Debug,PIXI.utils._saidHello=!0,a.logMessage("Initialize Frogger.js...",s.Info),a.logMessage("Loading resources...",s.Info);var d=new t("assets/sounds");d.registerMap(g.resources.sounds),d.mute(e.Constants.AUDIO_MUTED);var p=new o("assets/sprites");p.registerMap(g.resources.sprites),p.onLoadingCompleted.register(function(){a.logMessage("Resources loaded.",s.Info);var t=new u,o=new h(e.Constants.WINDOW_WIDTH,e.Constants.WINDOW_HEIGHT),g=new c;g.register("mainMenu",new l(o,p,d,g)),g.register("gameOver",new r(o,p,d,g)),g.register("gameComplete",new i(o,p,t,d,g));for(var f=1,v=0,m=e.Levels;v<m.length;v++){var w=m[v];w.level=f,w.levelsCount=e.Levels.length,g.register("level"+f,new n(o,p,t,d,w,g)),++f}g.change("mainMenu"),t.register(o),t.start()}),p.load()},g.resources={sprites:[{name:"boat-red-left",fileName:"boat-red-left.png"},{name:"boat-red-right",fileName:"boat-red-right.png"},{name:"boat-yellow-left",fileName:"boat-yellow-left.png"},{name:"boat-yellow-right",fileName:"boat-yellow-right.png"},{name:"car-blue-left",fileName:"car-blue-left.png"},{name:"car-blue-right",fileName:"car-blue-right.png"},{name:"car-green-left",fileName:"car-green-left.png"},{name:"car-green-right",fileName:"car-green-right.png"},{name:"car-red-left",fileName:"car-red-left.png"},{name:"car-red-right",fileName:"car-red-right.png"},{name:"car-white-left",fileName:"car-white-left.png"},{name:"car-white-right",fileName:"car-white-right.png"},{name:"congrats",fileName:"congrats.png"},{name:"cup",fileName:"cup.png"},{name:"frog",fileName:"frog.png"},{name:"frog-extend",fileName:"frog-extend.png"},{name:"goal",fileName:"goal.png"},{name:"background",fileName:"background.png"},{name:"menu-button",fileName:"menu-button.png"},{name:"menu-button-hovered",fileName:"menu-button-hovered.png"},{name:"menu-button-clicked",fileName:"menu-button-clicked.png"},{name:"menu-logo",fileName:"menu-logo.png"},{name:"stripe",fileName:"stripe.png"},{name:"grass",fileName:"grass.png"},{name:"grass-water-top",fileName:"grass-water-top.png"},{name:"grass-water-bottom",fileName:"grass-water-bottom.png"},{name:"water",fileName:"water.png"},{name:"road-top",fileName:"road-top.png"},{name:"road-middle-top",fileName:"road-middle-top.png"},{name:"road-middle-bottom",fileName:"road-middle-bottom.png"},{name:"road-bottom",fileName:"road-bottom.png"},{name:"panel-button",fileName:"panel-button.png"},{name:"panel-button-hovered",fileName:"panel-button-hovered.png"},{name:"panel-button-clicked",fileName:"panel-button-clicked.png"}],sounds:[{name:"game1",fileName:"game1.wav"},{name:"game2",fileName:"game2.wav"},{name:"game3",fileName:"game3.wav"},{name:"game4",fileName:"game4.wav"},{name:"game-over",fileName:"game-over.wav"},{name:"jump",fileName:"jump.mp3"},{name:"menu",fileName:"menu.wav"},{name:"next-level",fileName:"next-level.wav"},{name:"win",fileName:"win.wav"}]},g}();e.App=g}(FroggerJS||(FroggerJS={})),FroggerJS.App.initialize();var FroggerJS;!function(e){var t;!function(t){var i=e.Graphics.Container,n=e.Physics.isCollidable,r=e.Graphics.isRenderable,o=e.Physics.RectangleBounding,a=function(t){function i(e,i){t.call(this),this.bounding=new o(new PIXI.Point(0,0),e,i)}return __extends(i,t),i.prototype.addChild=function(i){(i instanceof PIXI.DisplayObject||r(i))&&t.prototype.addChild.call(this,i),e.Constants.DISPLAY_BOUNDING&&n(i)&&this.container.addChild(i.getBounding().getDisplayObject())},i.prototype.getBounding=function(){return this.bounding},i}(i);t.Board=a}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));
//# sourceMappingURL=frogger.min.js.map
