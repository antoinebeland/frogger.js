var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},FroggerJS;!function(e){e.Constants={TILE_SIZE:120,WINDOW_WIDTH:1560,WINDOW_HEIGHT:1200,AUDIO_MUTED:!0,DISPLAY_BOUNDING:!1,AVAILABLE_LIVES:5,DEFAULT_TEXT_STYLE:{font:"40px Arial",fill:"white"},DEFAULT_TEXT_MARGIN:15},e.Levels=[{level:1,goalsNumber:5,board:[{texture:"grass-water-top",touchAllowed:!0},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"left",speed:1.5}},{texture:"water",touchAllowed:!1,mobile:{type:"boat",orientation:"right",speed:1}},{texture:"grass-water-bottom",touchAllowed:!0},{texture:"road-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1}},{texture:"road-middle-top",touchAllowed:!0,mobile:{type:"car",orientation:"left",speed:1.5}},{texture:"road-middle-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1.5}},{texture:"road-bottom",touchAllowed:!0,mobile:{type:"car",orientation:"right",speed:1}},{texture:"grass",touchAllowed:!0}]}]}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(e){this.basePath=e,this.sounds={}}return e.prototype.register=function(e,t){if(this.sounds[e])throw new Error("A sound is already registered with the '"+e+"' identifier.");this.sounds[e]=new Howl({src:this.basePath+"/"+t})},e.prototype.play=function(e,t){if(void 0===t&&(t=!1),!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var i=this.sounds[e];i.off("fade"),i.loop(t),i.play()},e.prototype.stop=function(e){if(!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");this.sounds[e].stop()},e.prototype.fadeIn=function(e,t,i){if(void 0===i&&(i=!1),!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var n=this.sounds[e];n.volume(0),this.play(e,i),n.fade(0,1,t)},e.prototype.fadeOut=function(e,t){if(!this.sounds[e])throw new Error("The specified '"+e+"' identifier doesn't exist.");var i=this.sounds[e];i.on("fade",function(){i.stop()}),i.fade(i.volume(),0,t)},e.prototype.mute=function(e){for(var t in this.sounds)this.sounds.hasOwnProperty(t)&&this.sounds[t].mute(e)},e}();e.AudioManager=t}(t=e.Audio||(e.Audio={}))}(FroggerJS||(FroggerJS={}));var Utils;!function(e){var t=function(){function e(){this.handlers=[]}return e.prototype.register=function(e,t){t||(t=this),this.handlers.push({handler:e,context:t})},e.prototype.unregister=function(e,t){t||(t=this),this.handlers=this.handlers.filter(function(i){return i.handler!==e&&i.context!==t})},e.prototype.invoke=function(e){this.handlers.slice(0).forEach(function(t){return t.handler.call(t.context,e)})},e}();e.Event=t}(Utils||(Utils={}));var FroggerJS;!function(e){var t;!function(e){var t=Utils.Event,i=function(){function e(e,i){void 0===i&&(i="png"),this.onLoadingCompleted=new t,this.loader=PIXI.loader,this.baseResourcesPath=e,this.imageExtension=i;var n=this;this.loader.once("complete",function(){n.onLoadingCompleted.invoke()})}return e.prototype.register=function(e){if(e instanceof Array)for(var t=0;t<e.length;++t)this.registerSingleElement(e[t]);else this.registerSingleElement(e)},e.prototype.get=function(e){if(!this.loader.resources[e])throw new Error('The "'+e+"\" doesn't exist in the resources.");return this.loader.resources[e].texture},e.prototype.load=function(){this.loader.load()},e.prototype.registerSingleElement=function(e){this.loader.add(e,this.baseResourcesPath+"/"+e+"."+this.imageExtension)},e}();e.ImageLoader=i}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.ticker=PIXI.ticker.shared,this.ticker.autoStart=!1,this.ticker.stop()}return e.prototype.register=function(e){this.ticker.add(e.update,e)},e.prototype.unregister=function(e){this.ticker.remove(e.update,e)},e.prototype.start=function(){this.ticker.start()},e.prototype.stop=function(){this.ticker.stop()},e}();e.Ticker=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){function t(e){return void 0!==e.getDisplayObject&&e.getDisplayObject()instanceof PIXI.DisplayObject}e.isRenderable=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.container=new PIXI.Container}return e.prototype.getDisplayObject=function(){return this.container},e.prototype.addChild=function(e){e instanceof PIXI.DisplayObject?this.container.addChild(e):this.container.addChild(e.getDisplayObject())},e.prototype.removeChild=function(e){e instanceof PIXI.DisplayObject?this.container.removeChild(e):this.container.removeChild(e.getDisplayObject())},e.prototype.clear=function(){this.container.removeChildren()},e}();e.Container=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(e){function t(t,i){e.call(this),this.width=t,this.height=i,this.renderer=PIXI.autoDetectRenderer(t,i,{resolution:window.devicePixelRatio}),this.resize(),document.body.appendChild(this.renderer.view),window.addEventListener("resize",this.resize.bind(this))}return __extends(t,e),t.prototype.update=function(e){this.renderer.render(this.container)},t.prototype.resize=function(){var e=Math.min(window.innerWidth/this.width,window.innerHeight/this.height);this.container.scale.x=this.container.scale.y=e,this.renderer.resize(Math.ceil(this.width*e),Math.ceil(this.height*e))},t}(e.Container);e.Scene=t}(t=e.Graphics||(e.Graphics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function e(){this.states={}}return e.prototype.register=function(e,t){this.states[e]=t},e.prototype.change=function(e){if(!(e in this.states))throw new Error("The '"+e+"' state doesn't exist.");var t=this.states[e];this.currentState&&this.currentState.leaving(),this.currentState=t,this.currentState.entered()},e}();e.StateManager=t}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=Utils.Event,i=function(e){function i(i,n,r){function o(){this.clickedTexture&&(this.texture=this.clickedTexture)}function s(){this.isHovered&&this.onClick.invoke(),this.texture=this.defaultTexture}function a(){this.isHovered=!0,this.hoveredTexture&&(this.texture=this.hoveredTexture)}function h(){this.isHovered=!1,this.texture=this.defaultTexture}void 0===n&&(n=""),e.call(this,i),this.isHovered=!1,this.hoveredTexture=void 0,this.clickedTexture=void 0,this.onClick=new t,this.onHover=new t,this.interactive=!0,this.defaultTexture=i,this.on("mouseover",a).on("mouseout",h).on("mousedown",o).on("mouseup",s).on("mouseupoutside",s).on("touchstart",o).on("touchend",s).on("touchendoutside",s),this.text=r?new PIXI.Text(n,r):new PIXI.Text(n),this.text.anchor.x=.5,this.text.anchor.y=.5,this.text.position.y=.5*this.height,this.addChild(this.text)}return __extends(i,e),i}(PIXI.Sprite);e.Button=i}(t=e.Controls||(e.Controls={}))}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Constants,n=e.Views.Controls.Button,r=Utils.Event,o=function(){function e(e){this.onPlayClicked=new r,this.onSettingsClicked=new r,this.container=new PIXI.Container;var t=250,o={font:"60px Arial",fill:"white"},s=.5*i.WINDOW_WIDTH,a=new PIXI.extras.TilingSprite(e.get("menu-background"),i.WINDOW_WIDTH,i.WINDOW_HEIGHT),h=new PIXI.extras.TilingSprite(e.get("menu-stripe"),i.WINDOW_WIDTH,t);h.y=155;var l=new PIXI.Sprite(e.get("menu-logo"));l.anchor.x=.5,l.x=s,l.y=195;var c=e.get("menu-button"),u=e.get("menu-button-hovered"),g=e.get("menu-button-clicked"),d=new n(c,"PLAY",o);d.hoveredTexture=u,d.clickedTexture=g,d.anchor.x=.5,d.x=s,d.y=550,d.onClick.register(function(){this.onPlayClicked.invoke()},this);var p=new n(c,"SETTINGS",o);p.hoveredTexture=u,p.clickedTexture=g,p.anchor.x=.5,p.x=s,p.y=700,p.onClick.register(function(){this.onSettingsClicked.invoke()},this),this.container.addChild(a),this.container.addChild(h),this.container.addChild(l),this.container.addChild(d),this.container.addChild(p)}return e.prototype.getDisplayObject=function(){return this.container},e}();t.MainMenuView=o}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var Utils;!function(e){!function(e){e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error"}(e.LogLevel||(e.LogLevel={}));var t=e.LogLevel,i=function(){function e(){}return e.logMessage=function(i,n){if(void 0===n&&(n=t.Debug),!(e.activeLogLevel>n))switch(n){case t.Debug:console.log("[DEBUG] "+i);break;case t.Info:console.info("[INFO] "+i);break;case t.Warning:console.warn("[WARNING] "+i);break;case t.Error:console.error("[ERROR] "+i)}},e.activeLogLevel=t.Debug,e}();e.Logger=i}(Utils||(Utils={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.MainMenuView,n=Utils.Logger,r=function(){function e(e,t,n,r){this.scene=e,this.audioManager=n,this.stateManager=r,this.mainMenuView=new i(t),this.mainMenuView.onPlayClicked.register(function(){this.stateManager.change("level1")},this)}return e.prototype.entered=function(){n.logMessage("Entered in 'Main Menu State'."),this.scene.clear(),this.scene.addChild(this.mainMenuView),this.audioManager.fadeIn(e.SOUND_NAME,e.FADE_DURATION,!0)},e.prototype.leaving=function(){this.audioManager.fadeOut(e.SOUND_NAME,e.FADE_DURATION),this.scene.clear(),n.logMessage("Leaving the 'Main Menu State'.")},e.SOUND_NAME="menu",e.FADE_DURATION=500,e}();t.MainMenuState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){function t(e){return void 0!==e.getBounding}e.isCollidable=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e,t){this.speedDecimal=0,this.speed=e,this.orientation=t}return t.prototype.update=function(t){this.speedDecimal+=this.speed*t;var i=Math.floor(this.speedDecimal);this.speedDecimal=this.speedDecimal%1;var n=this.getDisplayObject();n.position.x+="left"==this.orientation?-i:i,n.position.x>e.Constants.WINDOW_WIDTH+n.width?n.position.x=-n.width:n.position.x<-n.width&&(n.position.x=e.Constants.WINDOW_WIDTH+n.width)},t}();t.Mobile=i}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e,t){this.center=e,this.radius=t}return t.prototype.getCenter=function(){return this.center},t.prototype.getRadius=function(){return this.radius},t.prototype.isCollide=function(i){if(i instanceof e.RectangleBounding){var n=i.getWidth()/2,r=i.getHeight()/2,o=Math.abs(this.center.x-i.getTop().x-n),s=Math.abs(this.center.y-i.getTop().y-r);if(o>n+this.radius)return!1;if(s>r+this.radius)return!1;if(o<=n)return!0;if(s<=r)return!0;var a=o-n,h=s-r;return a*a+h*h<=this.radius*this.radius}if(i instanceof t){var a=this.center.x-i.getCenter().x,h=this.center.y-i.getCenter().y,l=Math.sqrt(a*a+h*h);return l<this.radius+i.getRadius()}throw new Error("Unknown bounding.")},t.prototype.getDisplayObject=function(){var e=new PIXI.Graphics;return e.position=this.center,e.alpha=.5,e.beginFill(16711680),e.drawCircle(0,0,this.radius),e.endFill(),e},t}();e.CircleBounding=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i,n=e.Physics.CircleBounding;!function(e){e[e.Up=38]="Up",e[e.Down=40]="Down",e[e.Left=37]="Left",e[e.Right=39]="Right"}(i||(i={}));var r;!function(e){e[e.Up=0]="Up",e[e.Left=3*Math.PI/2]="Left",e[e.Down=Math.PI]="Down",e[e.Right=Math.PI/2]="Right"}(r||(r={}));var o=function(){function t(t){this.tilePosition=void 0,this.deltaPosition=void 0,this.keyUpTexture=t.get("frog"),this.keyDownTexture=t.get("frog-extend"),this.sprite=new PIXI.Sprite(this.keyUpTexture),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5;var o=.3;this.bounding=new n(this.sprite.position,this.sprite.width*o);var s=this;this.onKeyDown=function(e){var t;switch(e.keyCode){case i.Left:t=r.Left;break;case i.Up:t=r.Up;break;case i.Right:t=r.Right;break;case i.Down:t=r.Down}s.sprite.rotation=t,s.sprite.texture=s.keyDownTexture},this.onKeyUp=function(t){var n=e.Constants.TILE_SIZE;switch(s.sprite.texture=s.keyUpTexture,t.keyCode){case i.Left:s.sprite.position.x-n>=0&&(s.sprite.position.x-=n);break;case i.Up:s.sprite.position.y-n>=0&&(s.sprite.position.y-=n);break;case i.Right:s.sprite.position.x+n<=e.Constants.WINDOW_WIDTH&&(s.sprite.position.x+=n);break;case i.Down:s.sprite.position.y+n<=e.Constants.WINDOW_HEIGHT&&(s.sprite.position.y+=n)}s.deltaPosition=void 0,t.keyCode!=i.Up&&t.keyCode!=i.Down||s.updateTilePosition()}}return t.loseLife=function(){if(--t.availableLives<0)throw new Error("Negative live count.")},t.getAvailableLives=function(){return t.availableLives},t.setAvailableLives=function(e){if(e<0)throw new Error("Negative live count.");t.availableLives=e},t.prototype.startPosition=function(){this.sprite.rotation=r.Up,this.sprite.position.x=e.Constants.WINDOW_WIDTH/2,this.sprite.position.y=e.Constants.WINDOW_HEIGHT-this.sprite.height/2,this.updateTilePosition()},t.prototype.follow=function(e){this.deltaPosition||(this.deltaPosition=this.sprite.position.x-e.getDisplayObject().position.x),this.sprite.position.x=e.getDisplayObject().position.x+this.deltaPosition},t.prototype.getLinePosition=function(){return this.tilePosition},t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.updateTilePosition=function(){this.tilePosition=Math.floor(this.sprite.position.y/e.Constants.TILE_SIZE)},t.availableLives=5,t}();t.Actor=o}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Physics.CircleBounding,n=function(){function e(e){this.sprite=new PIXI.Sprite(e.get("goal")),this.sprite.anchor.x=.5,this.sprite.anchor.y=.5;var t=.4;this.bounding=new i(this.sprite.position,this.sprite.width*t),this.availability=!0}return e.prototype.getDisplayObject=function(){return this.sprite},e.prototype.getBounding=function(){return this.bounding},e.prototype.isAvailable=function(){return this.availability},e.prototype.setAvailability=function(e){this.availability=e},e}();t.GoalDeck=n}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=function(){function t(e,t,i){this.top=e,this.width=t,this.height=i}return t.prototype.getTop=function(){return this.top},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCollide=function(i){if(i instanceof t)return this.top.x<i.getTop().x+i.getWidth()&&this.top.x+this.width>i.getTop().x&&this.top.y<i.getTop().y+i.getHeight()&&this.height+this.top.y>i.getTop().y;if(i instanceof e.CircleBounding)return i.isCollide(this);throw new Error("Unknown bounding.")},t.prototype.getDisplayObject=function(){var e=new PIXI.Graphics;return e.position=this.top,e.alpha=.5,e.beginFill(255),e.drawRect(0,0,this.width,this.height),e.endFill(),e},t}();e.RectangleBounding=t}(t=e.Physics||(e.Physics={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Physics.RectangleBounding,n=function(e){function t(n,r,o){e.call(this,o,r);var s=Math.floor(Math.random()*t.availableColors.length),a=n.get(t.TYPE+"-"+t.availableColors[s]+"-"+r);this.sprite=new PIXI.Sprite(a),this.bounding=new i(this.sprite.position,this.sprite.width,this.sprite.height)}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!1},t.TYPE="car",t.availableColors=["blue","green","red","white"],t}(t.Mobile);t.Car=n}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i;!function(t){var i=e.Physics.RectangleBounding,n=function(e){function t(n,r,o){e.call(this,o,r);var s=Math.floor(Math.random()*t.availableColors.length),a=n.get(t.TYPE+"-"+t.availableColors[s]+"-"+r);this.sprite=new PIXI.Sprite(a),this.bounding=new i(this.sprite.position,this.sprite.width,this.sprite.height)}return __extends(t,e),t.prototype.getDisplayObject=function(){return this.sprite},t.prototype.getBounding=function(){return this.bounding},t.prototype.canBeHit=function(){return!0},t.TYPE="boat",t.availableColors=["red","yellow"],t}(t.Mobile);t.Boat=n}(i=t.Objects||(t.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.imageLoader=e}return t.prototype.createMobile=function(t,i,n){switch(t.toLowerCase()){case e.Car.TYPE:return new e.Car(this.imageLoader,i,n);case e.Boat.TYPE:return new e.Boat(this.imageLoader,i,n)}throw new Error("The mobile name doesn't exist.")},t}();e.MobileFactory=t}(t=e.Objects||(e.Objects={}))}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.Objects.MobileFactory,n=e.Game.Objects.GoalDeck,r=function(){function t(e){this.imageLoader=e,this.mobileFactory=new i(e)}return t.prototype.parse=function(t){if(!t.hasOwnProperty("level"))throw new Error("Level property is missing.");if(!t.hasOwnProperty("goalsNumber"))throw new Error("'Goals Number' property is missing.");if(!t.hasOwnProperty("board"))throw new Error("Board property is missing.");if(t.board.length!=e.Constants.WINDOW_HEIGHT/e.Constants.TILE_SIZE)throw new Error("The level configuration isn't valid.");for(var i={level:t.level,tiles:[],mobiles:[],goals:[],touchAllowedStatus:[]},r=e.Constants.WINDOW_WIDTH/e.Constants.TILE_SIZE,o=t.board,s=0;s<o.length;++s){if(!o[s].hasOwnProperty("texture"))throw new Error("Texture property is missing.");if(!o[s].hasOwnProperty("touchAllowed"))throw new Error("TouchAllowed property is missing.");i.touchAllowedStatus.push(o[s].touchAllowed),i.tiles[s]=[];for(var a=this.imageLoader.get(o[s].texture),h=0;h<r;++h){var l=new PIXI.Sprite(a);l.x=h*e.Constants.TILE_SIZE,l.y=s*e.Constants.TILE_SIZE,i.tiles[s].push(l)}i.mobiles[s]=[],o[s].hasOwnProperty("mobile")&&(i.mobiles[s]=this.parseMobile(o[s].mobile,s))}for(var c=.5*e.Constants.TILE_SIZE,u=e.Constants.WINDOW_WIDTH/(2*t.goalsNumber),s=0;s<t.goalsNumber;++s){var g=new n(this.imageLoader),d=g.getDisplayObject();d.x=u*(2*s+1),d.y=c,i.goals.push(g)}return i},t.prototype.parseMobile=function(t,i){var n=2.5,r=[];if(!t.hasOwnProperty("type"))throw new Error("Type property is missing.");if(!t.hasOwnProperty("orientation"))throw new Error("Rotation property is missing.");if(!t.hasOwnProperty("speed"))throw new Error("Speed property is missing.");var o=0,s=0;do{var a=this.mobileFactory.createMobile(t.type,t.orientation,t.speed),h=a.getDisplayObject();h.x=o,h.y=i*e.Constants.TILE_SIZE,s=h.width,o+=s+Math.floor(Math.random()*n*s+s),r.push(a)}while(o<e.Constants.WINDOW_WIDTH);return r},t}();t.GameLevelParser=r}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.Actor,n=Utils.Event,r=Utils.Logger,o=function(){function o(i,r){this.onGameOver=new n,this.onNextLevel=new n,this.imageLoader=i,this.board=new t.Board(e.Constants.WINDOW_WIDTH,e.Constants.WINDOW_HEIGHT),this.setup(e.Levels[0])}return o.prototype.setup=function(n){r.logMessage("Initialize level "+n.level+"...");var o=new t.GameLevelParser(this.imageLoader),s=o.parse(n);this.mobiles=s.mobiles,this.goals=s.goals,this.touchAllowedStatus=s.touchAllowedStatus,1==s.level&&i.setAvailableLives(e.Constants.AVAILABLE_LIVES);for(var a=0;a<s.tiles.length;++a)for(var h=0;h<s.tiles[a].length;++h)this.board.addChild(s.tiles[a][h]);for(var a=0;a<this.mobiles.length;++a)for(var h=0;h<this.mobiles[a].length;++h)this.board.addChild(this.mobiles[a][h]);for(var a=0;a<this.goals.length;++a)this.board.addChild(this.goals[a]);this.labels={livesCount:new PIXI.Text("LIVES: "+i.getAvailableLives(),e.Constants.DEFAULT_TEXT_STYLE),currentLevel:new PIXI.Text("LEVEL "+n.level,e.Constants.DEFAULT_TEXT_STYLE)};var l=e.Constants.WINDOW_HEIGHT/e.Constants.TILE_SIZE*e.Constants.TILE_SIZE-e.Constants.DEFAULT_TEXT_MARGIN;this.labels.livesCount.anchor.x=1,this.labels.livesCount.anchor.y=1,this.labels.currentLevel.anchor.y=1,this.labels.livesCount.x=e.Constants.WINDOW_WIDTH-e.Constants.DEFAULT_TEXT_MARGIN,this.labels.currentLevel.x=e.Constants.DEFAULT_TEXT_MARGIN,this.labels.livesCount.y=l,this.labels.currentLevel.y=l,this.board.addChild(this.labels.livesCount),this.board.addChild(this.labels.currentLevel),this.generateActor()},o.prototype.destroy=function(){document.removeEventListener("keydown",this.actor.onKeyDown),document.removeEventListener("keyup",this.actor.onKeyUp)},o.prototype.getBoard=function(){return this.board},o.prototype.update=function(e){for(var t=0;t<this.mobiles.length;++t){for(var i=!1,n=0;n<this.mobiles[t].length;++n)if(this.mobiles[t][n].update(e),this.actor.getLinePosition()==t){var r=this.mobiles[t][n];r.getBounding().isCollide(this.actor.getBounding())&&(i=!0,r.canBeHit()?this.actor.follow(r):this.restart())}this.actor.getLinePosition()!=t||i||this.touchAllowedStatus[t]||this.restart()}for(var t=0;t<this.goals.length;++t){var o=this.goals[t];if(0==this.actor.getLinePosition()&&o.isAvailable()&&o.getBounding().isCollide(this.actor.getBounding())){o.setAvailability(!1);var s=this.goals.filter(function(e){return e.isAvailable()}).length;if(this.actor.getDisplayObject().x=o.getDisplayObject().x,this.actor.getDisplayObject().y=o.getDisplayObject().y,0==s)return void this.onNextLevel.invoke();this.generateActor()}}this.board.getBounding().isCollide(this.actor.getBounding())||this.restart()},o.prototype.generateActor=function(){this.actor&&(document.removeEventListener("keydown",this.actor.onKeyDown),document.removeEventListener("keyup",this.actor.onKeyUp)),this.actor=new i(this.imageLoader),this.actor.startPosition(),document.addEventListener("keydown",this.actor.onKeyDown),document.addEventListener("keyup",this.actor.onKeyUp),this.board.addChild(this.actor)},o.prototype.restart=function(){this.actor.startPosition(),i.loseLife();var e=i.getAvailableLives();r.logMessage("One live lost. "+e+" live(s) remaining."),this.labels.livesCount.text="LIVES: "+e,e<=0&&this.onGameOver.invoke()},o}();t.GameLevel=o}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Game.GameLevel,n=Utils.Logger,r=function(){function e(e,t,i,n,r,o){this.scene=e,this.imageLoader=t,this.ticker=i,this.audioManager=n,this.levelConfiguration=r,this.stateManager=o}return e.prototype.entered=function(){n.logMessage("Entered in 'Game Level "+this.levelConfiguration.level+" State'."),this.gameLevel=new i(this.imageLoader,this.levelConfiguration),this.gameLevel.onGameOver.register(this.gameOverOccurred,this),this.gameLevel.onNextLevel.register(this.nextLevelOccurred,this),this.scene.clear(),this.scene.addChild(this.gameLevel.getBoard()),this.ticker.register(this.gameLevel)},e.prototype.leaving=function(){this.ticker.unregister(this.gameLevel),this.gameLevel.onGameOver.unregister(this.gameOverOccurred,this),this.gameLevel.onNextLevel.unregister(this.nextLevelOccurred,this),this.gameLevel.destroy(),n.logMessage("Leaving the 'Game Level "+this.levelConfiguration.level+" State'.")},e.prototype.gameOverOccurred=function(){this.stateManager.change("gameOver")},e.prototype.nextLevelOccurred=function(){var e=this.levelConfiguration.level+1;this.levelConfiguration.levelsCount>e?this.stateManager.change("endGame"):this.stateManager.change("level"+e)},e}();t.GameLevelState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Constants,n=e.Views.Controls.Button,r=Utils.Event,o=function(){function e(e){this.onReplayClicked=new r,this.onBackToMenuClicked=new r,this.container=new PIXI.Container;var t=new PIXI.Graphics;t.beginFill(16777215,.5),t.drawRect(0,0,i.WINDOW_WIDTH,i.WINDOW_HEIGHT),t.endFill();var o=new PIXI.Graphics;o.beginFill(884404),o.lineStyle(4,0),o.drawRect(0,0,600,400),o.endFill(),o.x=.5*i.WINDOW_WIDTH-300,o.y=.5*i.WINDOW_HEIGHT-200;var s=new PIXI.Text("GAME OVER",{font:"60px Arial",fill:"white"});s.anchor.x=.5,s.x=300,s.y=60,o.addChild(s);var a=e.get("panel-button"),h=e.get("panel-button-hovered"),l=e.get("panel-button-clicked"),c=new n(a,"REPLAY",{font:"45px Arial",fill:"white"});c.hoveredTexture=h,c.clickedTexture=l,c.anchor.x=.5,c.x=300,c.y=170,c.onClick.register(function(){this.onReplayClicked.invoke()},this);var u=new n(a,"MENU",{font:"45px Arial",fill:"white"});u.hoveredTexture=h,u.clickedTexture=l,u.anchor.x=.5,u.x=300,u.y=275,u.onClick.register(function(){this.onBackToMenuClicked.invoke()},this),o.addChild(c),o.addChild(u),o.addChild(c),this.container.addChild(t),this.container.addChild(o)}return e.prototype.getDisplayObject=function(){return this.container},e}();t.GameOverView=o}(t=e.Views||(e.Views={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(t){var i=e.Views.GameOverView,n=Utils.Logger,r=function(){function e(e,t,n,r){this.scene=e,this.audioManager=n,this.stateManager=r,this.gameOverView=new i(t)}return e.prototype.entered=function(){n.logMessage("Entered in the 'Game Over State'."),this.gameOverView.onReplayClicked.register(this.replayOccurred,this),this.gameOverView.onBackToMenuClicked.register(this.backToMenuOccurred,this),this.scene.addChild(this.gameOverView)},e.prototype.leaving=function(){this.scene.clear(),this.gameOverView.onReplayClicked.unregister(this.replayOccurred,this),this.gameOverView.onBackToMenuClicked.unregister(this.backToMenuOccurred,this),n.logMessage("Leaving the 'Game Over State'.")},e.prototype.replayOccurred=function(){this.stateManager.change("level1")},e.prototype.backToMenuOccurred=function(){this.stateManager.change("mainMenu")},e}();t.GameOverState=r}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t;!function(e){var t=Utils.Logger,i=function(){function e(){}return e.prototype.entered=function(){t.logMessage("Entered in 'End Game State'.")},e.prototype.leaving=function(){t.logMessage("Leaving the 'End Game State'.")},e}();e.EndGameState=i}(t=e.States||(e.States={}))}(FroggerJS||(FroggerJS={}));var FroggerJS;!function(e){var t=e.States.GameOverState,i=e.Audio.AudioManager,n=e.Graphics.ImageLoader,r=e.Graphics.Scene,o=e.Graphics.Ticker,s=e.States.StateManager,a=e.States.MainMenuState,h=e.States.GameLevelState,l=e.States.EndGameState,c=Utils.Logger,u=Utils.LogLevel,g=function(){function g(){}return g.initialize=function(){c.activeLogLevel=u.Debug,PIXI.utils._saidHello=!0,c.logMessage("Initialize Frogger.js...",u.Info),c.logMessage("Loading resources...",u.Info);var d=new i("assets/sounds");d.register("menu","menu.wav"),d.mute(e.Constants.AUDIO_MUTED);var p=new n("assets/sprites");p.register(g.resources),p.onLoadingCompleted.register(function(){c.logMessage("Resources loaded.",u.Info);var i=new o,n=new r(e.Constants.WINDOW_WIDTH,e.Constants.WINDOW_HEIGHT),g=new s;g.register("mainMenu",new a(n,p,d,g)),g.register("level1",new h(n,p,i,d,{level:1,levelsCount:2},g)),g.register("level2",new h(n,p,i,d,{level:2,levelsCount:2},g)),g.register("gameOver",new t(n,p,d,g)),g.register("endGame",new l),g.change("mainMenu"),i.register(n),i.start()}),p.load()},g.resources=["boat-red-left","boat-red-right","boat-yellow-left","boat-yellow-right","car-blue-left","car-blue-right","car-green-left","car-green-right","car-red-left","car-red-right","car-white-left","car-white-right","frog","frog-extend","goal","menu-background","menu-button","menu-button-hovered","menu-button-clicked","menu-logo","menu-stripe","grass","grass-water-top","grass-water-bottom","water","road-top","road-middle-top","road-middle-bottom","road-bottom","panel-button","panel-button-hovered","panel-button-clicked"],g}();e.App=g}(FroggerJS||(FroggerJS={})),FroggerJS.App.initialize();var FroggerJS;!function(e){var t;!function(t){var i=e.Graphics.Container,n=e.Physics.RectangleBounding,r=e.Physics.isCollidable,o=e.Graphics.isRenderable,s=function(t){function i(e,i){t.call(this),this.bounding=new n(new PIXI.Point(0,0),e,i)}return __extends(i,t),i.prototype.addChild=function(i){(i instanceof PIXI.DisplayObject||o(i))&&t.prototype.addChild.call(this,i),e.Constants.DISPLAY_BOUNDING&&r(i)&&this.container.addChild(i.getBounding().getDisplayObject())},i.prototype.getBounding=function(){return this.bounding},i}(i);t.Board=s}(t=e.Game||(e.Game={}))}(FroggerJS||(FroggerJS={}));
//# sourceMappingURL=frogger.min.js.map
